(this["webpackJsonptradeforce-client"]=this["webpackJsonptradeforce-client"]||[]).push([[0],{125:function(e,t,a){e.exports=a.p+"static/media/default.6712b19c.jpg"},127:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAA5CAYAAABzlmQiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAoOSURBVHhe7ZwLjB1VGYD3DS3dLW0RpNVUpIgtKTTII5oYiGh4SGJooEEhoFUjQhMVxYgJKooKIUZNxGBCoWoiSo2PgMaI8mxQqSjGhlffrVRqC3SBtd3de7d8/5l/Tmdm587MvXfu3WX3/5I/55z//89jzsw/c+48bodhGIZhGIZhGIZhGIZhGIZhGIZhGIZhGIZhGIZhGIZhGIZhTD46NW07g4ODcwcGBvo7Ozu3q8pI4eDBg1eTvCkoscM6O2/UbGns27dvzuzZs88iuwg5wik7Op6ir7WaN9qJBMfY2NgTyFYOgIWqzgVf2YnTCuZoA9vtUXVp0OT7qtXq/4LWY9yjLtOatl9BJDj6+/vv5+x0qpTZEdvIn513JcHvUg6Wb3R3d5+gqlyos4Tka0GpMA8xlh9qfsKRAGE8J2lRriCl7TPmp5f2t3R1db1FVVHW0tUKzRvtILxysGNioNtBUvPAxybBMcqZbquqCkG9s6T9eqCPu7T6pEACRIfmUHUp0NySoNVDSH/Ig2S/qm5GO6gVHCGVSuVBdY2ByQWH+FiAlB4g5wWtBtCX/eZI0JYlVnJZlYQds5HLvCyzdqnKwT67FPkp+h4p47eNJdZxzlgA6r6N5MqgFIDuo7Qnegdt3krfQ1oUnsT+W81POBIgjKdVS6wLSH4XlFxftzG/q7RotIO8Kwdn7OdI5qu7B52/coTUewVJgzZl+RDF3yGajEiA6Dgdqi4FmrsgaDWA+f2BmgylS9OWUNaVwzAmipYtsVoRHNSpa4mVhlxBaPtsLQpHU96jeQ9jOBO5WYuytPkNiZxhP4Ze1u57GMunnREof4C2P4ife5ZA+QXkAXz+TfrtwCtoB/m+Fh3YF1B3FfrFFGcjVXQyP98l/RX6zCUWPmdS/xJMb6c4J9A6xrDtpZ2nyd+B/T+iRPch5LPIPGxLRSdQfp5ko+Txlbt5/pmL1KGPc7SP8FlJyIvYt9LWXdifUp0D/bnIl7Qo7a4huRv5FPpzkKeZo+udEcSffs7HL/pMRjiATbblL+TXYP9/oD4EdpmHy7EtoBidB+l3D7ZN1F9NfrOqJ4Yyl1VR2rnEQj9u+YH8WIvyg/ZxdRXfGwLtePB7WLOO5DIG1fH4vBJY46DfiWzWokOreVBdg48EVCb4vExysta52imz8c9BGPPtqsuEPoZHR0ffq9UcqK8MrAG09XX87tOi1LlPXaWfW1SdCXX+SRILUsoXoy8yD0MksTGWAo3KmSOXVgWHQN0JCxDqyU7xUHYBQnYe+eFAmw/bkAyQNYGlGFrNQXEWfb8WWPLB99dar3CADA8PL6WeXIkKgetjUi8EVTJAntSsA38XIGQXka8E2kJc5TpQqLtL9bngu06r5VL4Nwjtrkfer8VUpvJvDsa2jDHKGeqPbMftlN0t0UqlsoR8n3MCbDtJvoBcg3wef1ne1AT7KZp1UP97JJeJkI8txVJ4B337Myn+z5FcgcgDvhWUr6P9aFCdpukjiFx5Yg9EOXidXmW16Pr6+pbRh1/W0dyjJB9GXB/IKnT7SUNknmoeV+z/U7CPIL+X/mk6vIt2Mvluzcu2PEvyOcSNB/97RR+C/QzNypiOpe6xWpSyLCVXItExjpCGhPNQHnQgkSdn+GtVFaOVV46QCb6CyFl03AkC3SXOQWGMt6jJgWpFYAnAHruC0Kz8VnFgG1a1B/t2NTtU7aCYXAbepCYP9XeqWbZht6odqHLvYqF2QRbhE2ry0O46tYXMVJPUT15BJDjepWYPuuRVTU4yHspLA7XHLwFHRkZOU52DPn6kJg9j/IeaHarOpa67WESpnOG/Q/uyLDg80E7tK0eEdYzzT5qvCduZ/PH4mqa18Gdn2h/VbJRXNc2FvsfVZ34rmi2LtDGm6VJhG+9FntBiFsl5rGqaRvLGRdp4GpqHRm/zyllBfnwuaFVwYNum2UkB43F3d4zmYH83Oo+yvJWXKp1wXL2i+pbS8HMQNvQMBvr4rFmz5LZpqcFBvVuxLcbnD6qaDETX2UbjNDSPHA/PciwdE0p3d/e4pV4raDhABAY9n8G6W4dJmgkONv6L2A8gF+H7ZzUZRttpKkBq0WxwaFECUIJEHmo9pCojA+bpOuZwd1SYv7eqedrANq9MzgPqZYG1PkoPEAZTSnCE4D+EXGhBkg/zdAQibwZExd86nS6wzTMScyDSq+a6KDVAyg6OEOq5ICFrQZIBcyxPif0P2aTgsjfwnNqwrfuT254Udc2ltABpVXCESJDQflt+mL1RYY7k1X3/QzZF/DtdUxmOtztTtj0m6ppLKQHS6uAIoZ2se+GGUTpNB0i7gsOY3nAszUHkaXso56qppTQVIBYckx/mej0i35lvqFarP1f1GxF51+q2iHwcKQzbL+/QuXmQvKpzaThA6MSCIwW2LzmnzX5z0+xdqMXsi5NUCr2RPUkoZfkfwjF5QjgPkld1Lg0NIiM43j3dgkNevtNsyDs1dbDN79FsLaJPlmcODQ1F30qVv+PJ+t+wWN/09WbNOqh/FIl/cRAa+Q2X3L5kH106zihN98O2nKjZkNg8YPd90H/s6TzHn59DAftMdPO0KBQeX90BwsBSg0P5G4P5ieZjUG9KXjnYpk2adTA38pr5i4g8oBqk/GU11cK/m8Scds6YMWOz1t3NXG4XlZrTSPZ9FfU2IuFSYrO0qWY5ULZotjCcAGJ90MZNtPtM2Afl5+lXvv5zUN5Fl+PeSi5AcltW0b58BRjORfKPNPzx19fXtwn7mBZlHpcz7m2RMe5A169msRd+K7yuAKGzrOCQjsewfxK/O1XloDyVl1XPsAP+pXkH8zAXkYdTA9gyX6pjbmJ/tUMd/5BLitTPeptXXoWPfaBEvUWIW0qwLwZU7cBXPnWtC/bbI9STT3EdtNuDnBj2gSSvKL/QbL3IyTUWwLR9FDLuQR9+cpz5ecN2gMR9DBaCfSH6cIzRq4f4/0yzuRQOkLzgCMEeC5IpHhyyvVXkI5yx1qvKw46Us+k3tZgKc7OaOboZ39gSg7K8vfotsjsCzXho+yByGX73qyoV2pcg/UxPT4//vLUotP9qpVK5mD42qCoV7HQztpZ9f4Oq6oJ+9iPLaefvqkoF+178ViJ/VZWDstzZyvwcAbssxb6CyHfxhSj8A5LG5zOIzOCIgr8E33Lq/DLQTA4Yl3zBd2RQcjzGGNO+o5hL4v/QAORgz3xVmzpyNpW18uGjo6ODvb29clDJWTy3HerKUkr+kEI+4JJg2YqffEx1Onn/OwLdw5qNgZ/8ScHxSPRbbfkwSL6u21nGNuIva3vZvsOc4hBylZO/kH0pKB6COjIn0d8TsmzM/JSBOkczf8cxf/6bI5BteQHZQv2a33ZQ9xjqLqRucmn6X0T6bmT5ZxiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYTRMR8fr9h0V6AMxMJgAAAAASUVORK5CYII="},144:function(e,t,a){e.exports=a.p+"static/media/placeholder-profile.8714556a.png"},145:function(e,t,a){e.exports=a.p+"static/media/hero.e18977fd.png"},165:function(e,t,a){e.exports=a(207)},170:function(e,t,a){},194:function(e,t,a){var n={"./all.jpg":195,"./clothing.jpg":196,"./electronics.jpg":197,"./food drink.jpg":198,"./hobbies.jpg":199,"./homeware.jpg":200,"./miscellaneous.jpg":201,"./necessities.jpg":202};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=194},195:function(e,t,a){e.exports=a.p+"static/media/all.baacc0ec.jpg"},196:function(e,t,a){e.exports=a.p+"static/media/clothing.a59db91d.jpg"},197:function(e,t,a){e.exports=a.p+"static/media/electronics.a97c09b7.jpg"},198:function(e,t,a){e.exports=a.p+"static/media/food drink.853abf40.jpg"},199:function(e,t,a){e.exports=a.p+"static/media/hobbies.033dc244.jpg"},200:function(e,t,a){e.exports=a.p+"static/media/homeware.10d47303.jpg"},201:function(e,t,a){e.exports=a.p+"static/media/miscellaneous.6ba19c58.jpg"},202:function(e,t,a){e.exports=a.p+"static/media/necessities.cd4e5d8e.jpg"},203:function(e,t,a){e.exports=a.p+"static/media/community.03141c61.jpg"},207:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),c=a.n(i),o=(a(170),a(16)),l=a(43),s=a(8),u=a(149),m=a(261),d=a(290),p=a(18),f=a(19),g=a(21),h=a(20),v=a(271),E=a(272),b=a(263),y=a(90),O=a.n(y),I=a(127),x=a.n(I),N=function(e){return r.a.createElement("div",{className:e.className},r.a.createElement(l.b,{to:"/"},r.a.createElement("img",{src:x.a,alt:"logo"})))},C=a(267),j=a(67),S=a.n(j),w=a(266),k=a(139),A=a.n(k),D=a(270),T=a(150),F=a(268),L=a(269),R=a(135),B=a.n(R),P=a(299),_=a(128),U=a.n(_),M=a(66),q=a.n(M),W=a(134),G=a.n(W),z=a(138),H=a.n(z),V=a(137),Q=a.n(V),Z=a(132),Y=a.n(Z),X=a(136),K=a.n(X),J=a(133),$=a.n(J),ee=a(6),te=a.n(ee),ae=a(10),ne=a(22),re=a.n(ne),ie=function(e){return{type:"ERROR_SNACKBAR",errMessage:e}},ce=function(e){return{type:"SUCCESS_SNACKBAR",successMessage:e}},oe="".concat("http://localhost:5000/api","/notifications"),le=function(e){return{type:"REMOVE_NOTIFICATION",_id:e}},se=function(e,t){return{type:"UPDATE_NOTIFICATION",_id:e,isRead:t}},ue=function(e){return{type:"UPDATE_ALL_NOTIFICATIONS",isRead:e}},me=Object(m.a)((function(){return{acceptedIcon:{color:"green"},rejectedIcon:{color:"red"},moreItems:{textTransform:"none"}}})),de=function(e){var t=e.dispatch,a=e.handleDeleteClick,i=e.onUpdateStatus,c=e._id,l=e.isRead,s=Object(n.useState)(null),u=Object(o.a)(s,2),m=u[0],d=u[1],p=me(),f=Boolean(m),g=function(){d(null)};return r.a.createElement("div",null,r.a.createElement(b.a,{"aria-label":"more","aria-controls":"more-menu","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)}},r.a.createElement(Y.a,null)),r.a.createElement(T.a,{id:"more-menu",anchorEl:m,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},keepMounted:!0,open:f,onClose:g},r.a.createElement(P.a,{onClick:g},r.a.createElement(C.a,{color:"inherit",onClick:function(){t(function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n){var r;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,re.a.patch("".concat(oe,"/markAsRead/").concat(e),{isRead:t});case 3:return r=a.sent,a.abrupt("return",n(se(r.data._id,r.data.isRead)));case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",n(ie(a.t0.response.data.message)));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(c,!l)).then((function(){i(c,!l)}))},className:p.moreItems,startIcon:l?r.a.createElement($.a,null):r.a.createElement(G.a,null)},l?"Mark as unread":"Mark as read")),r.a.createElement(P.a,{onClick:g},r.a.createElement(C.a,{color:"inherit",onClick:a,className:p.moreItems,startIcon:r.a.createElement(q.a,null)},"Clear"))))},pe=Object(s.b)()((function(e){var t=e.dispatch,a=e._id,i=e.type,c=e.date,l=e.isRead,s=e.content,u=e.key,m=e.onUpdateStatus,d=me(),p=Object(n.useState)(!0),f=Object(o.a)(p,2),g=f[0],h=f[1];return g?r.a.createElement(P.a,{selected:!l,divider:!0,key:u},r.a.createElement(F.a,null,function(e){return"newOffering"===e?r.a.createElement(B.a,{color:"primary"}):"offeringAccepted"===e?r.a.createElement(K.a,{className:d.acceptedIcon}):"offeringRejected"===e?r.a.createElement(Q.a,{className:d.rejectedIcon}):r.a.createElement(H.a,null)}(i)),r.a.createElement(L.a,{primary:s,primaryTypographyProps:{style:{whiteSpace:"normal",wordWrap:"break-word"}},secondary:U()(c).format("MMMM Do YYYY, h:mm a")}),r.a.createElement(de,{dispatch:t,handleDeleteClick:function(){t(function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.a.delete("".concat(oe,"/removeOneNotification/").concat(e));case 3:return t.abrupt("return",a(le(e)));case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",a(ie(t.t0.response.data.message)));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(a)).then((function(){h(!1)}))},onUpdateStatus:m,_id:a,isRead:l,className:d.seeMoreMenu})):null})),fe=Object(m.a)((function(){return{iconBtn:{padding:"1px"},notificationsMenu:{border:"1rem",borderColor:"black"},notificationBtn:{fontSize:"1.7rem",padding:"5px"},notificationsList:{width:"26rem",padding:"0",maxHeight:300,overflow:"auto"},headingBtn:{textTransform:"none"},headingBtns:{display:"flex",justifyContent:"space-between"}}})),ge=Object(s.b)((function(e){return{notifications:e.notifications,currentUser:e.currentUser}}))((function(e){var t=e.dispatch,a=e.notifications,i=e.currentUser,c=fe(),l=Object(n.useState)(null),s=Object(o.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(!0),p=Object(o.a)(d,2),f=p[0],g=p[1],h=Object(n.useState)(a),v=Object(o.a)(h,2),E=v[0],y=v[1];Object(n.useEffect)((function(){O()}),[f]);var O=function(){var e;t((e=i.user._id,function(){var t=Object(ae.a)(te.a.mark((function t(a){var n;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.a.get("".concat(oe,"/findByUserId/").concat(e));case 3:return n=t.sent,t.abrupt("return",a({type:"GET_NOTIFICATIONS",notifications:n.data}));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",a(ie(t.t0.response.data.message)));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())).then((function(e){y(e.notifications)}))},I=function(e,t){var a=E.map((function(a){return a._id===e&&(a.isRead=t),a}));y(a)},x=Boolean(u);return r.a.createElement("div",null,r.a.createElement(b.a,{color:"inherit","aria-label":"notifications","aria-controls":"notifications-menu","aria-haspopup":"true",onClick:function(e){m(e.currentTarget),O()},className:c.iconBtn},r.a.createElement(A.a,{className:c.notificationBtn})),r.a.createElement(T.a,{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"notifications-menu",anchorEl:u,keepMounted:!0,open:x,className:c.notificationsMenu,onClose:function(){m(null)},disableScrollLock:!0},r.a.createElement("div",{className:c.headingBtns},r.a.createElement(C.a,{className:c.headingBtn,onClick:function(){var e,n;a.length>0&&t((e=i.user._id,n=f,function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.a.patch("".concat(oe,"/markAllAsRead/").concat(e),{isRead:n});case 3:return t.abrupt("return",a(ue(n)));case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",a(ie(t.t0.response.data.message)));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())).then((function(){g(!f)}))}},"Mark all as ".concat(f?"read":"unread")),r.a.createElement(C.a,{className:c.headingBtn,onClick:function(){var e;t((e=i.user._id,function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.a.delete("".concat(oe,"/removeUserNotifications/").concat(e));case 3:return t.abrupt("return",a({type:"REMOVE_ALL_NOTIFICATIONS"}));case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",a(ie(t.t0.response.data.message)));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())).then((function(){O()}))}},"Clear all")),r.a.createElement(D.a,null),r.a.createElement(w.a,{className:c.notificationsList},function(e){return e.map((function(e){return r.a.createElement(pe,{key:e._id,_id:e._id,userId:e.userId,type:e.type,isRead:e.isRead,date:e.date,content:e.content,onUpdateStatus:I})}))}(E))))})),he=function(){return{type:"CLOSE_MODAL"}},ve=function(e){return{type:"OPEN_LOGIN_MODAL",openedFrom:e}},Ee=a(23),be=a(140),ye=a.n(be),Oe="".concat("http://localhost:5000/api","/users"),Ie=function(e){return{type:"SET_USER",user:e}},xe=function(e,t,a){var n=e.userName,r=e.firstName,i=e.lastName,c=e.email,o=e.postalCode,l=e.dateRegistered,s=e.password,u=e.isGoogleUser;return function(){var e=Object(ae.a)(te.a.mark((function e(m){var d,p,f;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m({type:"IS_USER_FETCHING"}),e.next=4,re.a.post(Oe,{userName:n,firstName:r,lastName:i,email:c,postalCode:o,dateRegistered:l,password:s,isGoogleUser:u});case 4:return d=e.sent,p=d.data,localStorage.setItem("token",p.token),m(ce("Your user was successfully registered!")),f=m(Ie({_id:p.user._id,userName:p.user.userName,firstName:p.user.firstName,lastName:p.user.lastName,email:p.user.email,postalCode:"None",dateRegistered:p.user.dateRegistered,isGoogleUser:p.user.isGoogleUser})),Ce(m,t,a,p.user._id),e.abrupt("return",f);case 13:return e.prev=13,e.t0=e.catch(0),m({type:"IS_USER_FAILED"}),e.abrupt("return",m(ie(e.t0.response.data.message)));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},Ne=function(e,t,a,n,r){return function(){var i=Object(ae.a)(te.a.mark((function i(c){var o,l,s,u;return te.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c({type:"IS_USER_FETCHING"}),i.prev=1,i.next=4,re.a.get("".concat(Oe,"/findUser/").concat(e));case 4:o=i.sent,i.next=16;break;case 7:if(i.prev=7,i.t0=i.catch(1),!a){i.next=14;break}return c(ce("Successfully logged in through Google!")),i.next=13,c(xe({userName:a.userName,firstName:a.givenName,lastName:a.familyName,email:e,postalCode:"None",dateRegistered:a.dateRegistered,password:t,isGoogleUser:!0}));case 13:return i.abrupt("return",i.sent);case 14:return c({type:"IS_USER_FAILED"}),i.abrupt("return",c(ie(i.t0.response.data.message)));case 16:return i.prev=16,i.next=19,re.a.post("".concat(Oe,"/login"),{email:e,password:t,isGoogleLogin:o.data.isGoogleUser});case 19:return l=i.sent,s=l.data,localStorage.setItem("token",s.token),c(ce("Successfully logged into the app!")),u=c(Ie({_id:s.user._id,userName:s.user.userName,firstName:s.user.firstName,lastName:s.user.lastName,email:s.user.email,postalCode:"None",dateRegistered:s.user.dateRegistered,isGoogleUser:s.user.isGoogleUser})),Ce(c,n,r,s.user._id),i.abrupt("return",u);case 28:return i.prev=28,i.t1=i.catch(16),c({type:"IS_USER_FAILED"}),i.abrupt("return",c(ie(i.t1.response.data.message)));case 32:case"end":return i.stop()}}),i,null,[[1,7],[16,28]])})));return function(e){return i.apply(this,arguments)}}()},Ce=function(e,t,a,n){e("MAKE_OFFER_BUTTON"===t&&void 0!==a&&a!==n?{type:"OPEN_OFFER_MODAL"}:{type:"CLOSE_MODAL"})},je=a(89),Se=Object(m.a)((function(e){return{googleBtn:{backgroundColor:"#1d588f",margin:e.spacing(1)}}})),we=Object(s.b)((function(e){return{currentUser:e.currentUser}}),(function(e){return{unsetUser:function(){return e({type:"UNSET_USER"})},closeModal:function(){return e({type:"CLOSE_MODAL"})},logoutSuccess:function(t){return e(ce(t))},logoutError:function(t){return e(ie(t))}}}))((function(e){var t=e.unsetUser,a=e.closeModal,n=e.logoutSuccess,i=e.logoutError,c=Se(),o=Object(Ee.f)();return r.a.createElement(je.GoogleLogout,{clientId:"282830719674-g3jh5koi6efcqmvtml24atp923gibqjp.apps.googleusercontent.com",className:c.googleBtn,buttonText:"Sign out using Google",render:function(e){return r.a.createElement(P.a,{onClick:e.onClick},"Logout")},onLogoutSuccess:function(e){return localStorage.removeItem("token"),o.push("/"),t(),n("Successfully logged out!"),a(),e},onFailure:function(e){return i("Failed to logout! Try again."),e}})})),ke=function(e){return{type:"SET_LOADING",isLoading:e}},Ae="".concat("http://localhost:5000/api","/users"),De=function(e){var t=e.userId,a=e.currentUserId;return function(){var e=Object(ae.a)(te.a.mark((function e(n){var r,i,c,o,l;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(ke(!0)),e.next=4,re.a.get("".concat(Ae,"/").concat(t,"/complete"));case 4:if(r=e.sent,!(i=r.data)){e.next=35;break}if(!a||t!==a){e.next=13;break}return e.next=10,re.a.get("".concat(Ae,"/").concat(t,"/postings/complete"));case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,re.a.get("".concat(Ae,"/").concat(t,"/postings/active"));case 15:e.t0=e.sent;case 16:return c=e.t0,e.next=19,re.a.get("".concat(Ae,"/").concat(t,"/postings/inactive"));case 19:if(o=e.sent,i.activePostings=c.data,i.inactivePostings=o.data,!a||t!==a){e.next=28;break}return e.next=25,re.a.get("".concat(Ae,"/").concat(t,"/offerings/active"));case 25:e.t1=e.sent,e.next=29;break;case 28:e.t1=[];case 29:return l=e.t1,i.offersSent=l.data,n({type:"LOAD_USER_DETAIL",user:i}),e.abrupt("return","success");case 35:return n(ie("This profile could not be loaded. Please try again later")),e.abrupt("return","error");case 37:e.next=43;break;case 39:return e.prev=39,e.t2=e.catch(0),404===e.t2.response.status?n(ie("User could not be found")):n(ie("This profile could not be loaded. Please try again later")),e.abrupt("return","error");case 43:return e.prev=43,n(ke(!1)),e.finish(43);case 46:case"end":return e.stop()}}),e,null,[[0,39,43,46]])})));return function(t){return e.apply(this,arguments)}}()};var Te=Object(s.b)((function(e){return{currentUser:e.currentUser}}),(function(e){return{unsetUser:function(){return e({type:"UNSET_USER"})},loadUserDetails:function(t){var a=t.userId,n=t.currentUserId;return e(De({userId:a,currentUserId:n}))}}}))((function(e){var t=r.a.useState(null),a=Object(o.a)(t,2),n=a[0],i=a[1],c=Object(Ee.f)(),l=function(){var t=Object(ae.a)(te.a.mark((function t(){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadUserDetails({userId:e.currentUser.user._id,currentUserId:e.currentUser.user._id});case 2:"success"===t.sent?c.push("/profile/user=".concat(e.currentUser.user._id)):c.push("/UserNotFound"),i(null);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(b.a,{className:e.iconBtnClass,color:"inherit","aria-label":"accountButton",onClick:function(e){i(e.currentTarget)}},r.a.createElement(ye.a,{className:e.accountBtnClass})),r.a.createElement(T.a,{id:"simple-menu",anchorEl:n,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,open:Boolean(n),onClose:function(){i(null)},disableScrollLock:!0},r.a.createElement(P.a,{onClick:l},"My Profile"),function(e,t){return e.user.isGoogleUser?r.a.createElement(we,null):r.a.createElement(P.a,{onClick:t},"Logout")}(e.currentUser,(function(){localStorage.removeItem("token"),e.unsetUser(),c.push("/")}))))})),Fe=Object(m.a)((function(){return{loginBtn:{fontSize:"1.2rem",fontWeight:"100",textTransform:"lowercase"}}})),Le=Object(m.a)((function(){return{root:{display:"flex",alignItems:"center"},divider:{display:"inline-block",height:"25px",width:"10px",marginLeft:"0.5rem",marginRight:"0.5rem",borderLeft:"1px solid white"},postItem:{textTransform:"lowercase",fontSize:"1.3rem",fontWeight:"100"},accountBtn:{fontSize:"2rem",padding:"5px"},iconBtn:{padding:"1px"}}})),Re=function(e){return r.a.createElement("div",{className:e.className}," ")},Be=function(e){return r.a.createElement(C.a,{color:"inherit",className:e.className,startIcon:r.a.createElement(S.a,null),onClick:function(){return e.openPostingModal()}},"post an item")},Pe=function(e){var t=Fe();return r.a.createElement(C.a,{type:"button",color:"inherit",className:t.loginBtn,onClick:function(){return e.openLoginModal("LOGIN_REGISTER_BUTTON")}},"Login/Register")},_e=function(e){var t=Le();return r.a.createElement("div",{className:t.root},r.a.createElement(Be,{className:t.postItem,openPostingModal:e.openPostingModal}),r.a.createElement(Re,{className:t.divider}),r.a.createElement(ge,null),r.a.createElement(Te,{iconBtnClass:t.iconBtn,accountBtnClass:t.accountBtn}))},Ue=Object(s.b)(null,{openPostingModal:function(){return{type:"OPEN_POSTING_MODAL"}},openLoginModal:ve})((function(e){return e.isLoggedIn?r.a.createElement(_e,{openPostingModal:e.openPostingModal}):r.a.createElement(Pe,{openLoginModal:e.openLoginModal})})),Me=Object(m.a)((function(e){return{navBarRoot:{},menuButton:{marginRight:e.spacing(2)},logo:{flexGrow:1},menuIcon:{fontSize:"2rem"},appBar:{background:e.palette.primary.main},loginBtn:{fontSize:"1.2rem",fontWeight:"100",textTransform:"lowercase"},flyoutRoot:{visibility:"hidden"}}})),qe=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMenuClick=function(t){t.preventDefault(),e.props.clickMenuBtn()},e}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement(We,{isLoggedIn:null!==this.props.currentUser.user,handleMenuClick:this.handleMenuClick})}}]),a}(r.a.Component);function We(e){var t=Me();return r.a.createElement("div",{className:t.navBarRoot},r.a.createElement(v.a,{position:"fixed",className:t.appBar},r.a.createElement(E.a,null,r.a.createElement(b.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:e.handleMenuClick},r.a.createElement(O.a,{className:t.menuIcon})),r.a.createElement(N,{className:t.logo}),r.a.createElement(Ue,{isLoggedIn:e.isLoggedIn}))),r.a.createElement(E.a,null))}var Ge=Object(s.b)((function(e){return{currentUser:e.currentUser}}),(function(e){return{clickMenuBtn:function(){return e({type:"CLICK_MENU_BTN"})}}}))(qe),ze=a(298),He=a(273),Ve=[{value:"",label:""},{value:"clothing",label:"Clothing"},{value:"electronics",label:"Electronics"},{value:"food drink",label:"Food/Drink"},{value:"hobbies",label:"Hobbies"},{value:"homeware",label:"Homeware"},{value:"miscellaneous",label:"Miscellaneous"},{value:"necessities",label:"Necessities"}],Qe=[{value:"",label:""},{value:"brand new",label:"Brand New"},{value:"like new",label:"Like New"},{value:"good",label:"Good"},{value:"used",label:"Used"},{value:"for parts",label:"For Parts/Not Working"}],Ze=Object(m.a)((function(e){return{paper:{width:"200px",height:"100%",border:"none",padding:e.spacing(5),background:e.palette.primary.main},links:{color:e.palette.secondary.main,fontSize:"1.5rem",fontWeight:"100",paddingBottom:"30px"},linkContainer:{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center"}}})),Ye=Object(s.b)((function(e){return{flyoutIsOpen:e.flyoutIsOpen}}),(function(e){return{closeFlyout:function(){return e({type:"CLOSE_FLYOUT"})}}}))((function(e){var t=Ze();return r.a.createElement(ze.a,{anchor:"left",open:e.flyoutIsOpen,onClose:e.closeFlyout,classes:{paper:t.paper}},r.a.createElement("div",{className:t.linkContainer},Ve.map((function(e,a){return 0===a&&(e={value:"all",label:"All"}),r.a.createElement(He.a,{href:"/items?category=".concat(e.value),key:a,className:t.links},e.label)}))))})),Xe=a(275),Ke=a(4),Je=a(291),$e=a(297),et=a(63),tt=a(17),at=a.n(tt);function nt(e){var t=e.elevation,a=e.colour,n=e.review;return r.a.createElement(Je.a,{p:2,display:"block",width:"90%",boxShadow:t,bgcolor:a,my:2},r.a.createElement(Je.a,{display:"flex"},r.a.createElement(Je.a,{color:"primary.main",fontSize:"subtitle1.fontSize",fontWeight:"fontWeightLight",mb:1,display:"inline",flexGrow:1},n.reviewUsername),r.a.createElement(Je.a,{display:"inline",alignContent:"center"},r.a.createElement($e.a,{name:"half-rating-read",value:n.rating,precision:.5,readOnly:!0}))),r.a.createElement(Je.a,{fontSize:"h5.fontSize",fontWeight:"fontWeightMedium",my:1.5},n.title),r.a.createElement(Je.a,{fontSize:"body2.fontSize",fontWeight:"fontWeightLight",my:1},n.review))}var rt=Object(m.a)((function(){return{reviews:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"45vh"}}})),it=function(e){var t=e.elevation,a=e.colour,n=e.reviews,i=rt();return r.a.createElement("div",{className:i.reviews},n.map((function(e,n){return r.a.createElement(nt,{elevation:t,colour:a,key:n,review:e})})))},ct=Object(m.a)((function(e){return{reviewHeader:{marginTop:e.spacing(1),marginBottom:e.spacing(2),"& > *":{marginRight:e.spacing(1)}},sellerName:{textDecoration:"underline",textDecorationColor:"#1d588f"}}}));function ot(e){var t=e.itemDetail,a=ct(),n=t.ownerReviews.length>0?at.a.reduce(t.ownerReviews,(function(e,t){return e+t.rating}),0)/t.ownerReviews.length:0;return r.a.createElement(Je.a,null,r.a.createElement(Je.a,{display:"flex",alignItems:"center",className:a.reviewHeader},r.a.createElement(He.a,{href:"/profile/user=".concat(t.ownerId),color:"inherit",variant:"h6",className:a.sellerName},t.ownerUsername),r.a.createElement(et.a,{variant:"h6"},"Reviews"),r.a.createElement($e.a,{name:"half-rating-read",value:n,precision:.5,readOnly:!0})),r.a.createElement(it,{elevation:0,colour:"#EBEEF1",reviews:t.ownerReviews}))}var lt=a(274),st=Object(m.a)((function(){return{root:{fontFamily:"Montserrat"},description:{fontWeight:400},textBody:{fontWeight:300}}}));function ut(e){var t=e.itemDetail,a=st();return r.a.createElement(lt.a,{item:!0,xs:12,className:a.root},r.a.createElement(et.a,{className:a.description,variant:"h6"},"Description"),r.a.createElement(et.a,{className:a.textBody,variant:"body1"},t.description))}var mt=a(108),dt=Object(m.a)((function(e){return{header:{margin:"1rem 0","& > *":{fontFamily:"Montserrat"}},title:{margin:0,fontWeight:400,color:e.palette.primary.main},subtitle:{fontWeight:300,color:"#4b4b4b",margin:"0.3rem 0"}}}));function pt(e){var t=dt(),a=e.itemDetail,n=a.date,i=a.title,c=a.location,o=function(e){return new Date(e).toLocaleDateString(void 0,{month:"long",day:"numeric"})}(n);return r.a.createElement(mt.a,{elevation:0,className:t.header},r.a.createElement(et.a,{className:t.subtitle,variant:"subtitle1"},o),r.a.createElement(et.a,{className:t.title,variant:"h3"},i),r.a.createElement(et.a,{className:t.subtitle,variant:"subtitle1"},c))}var ft=a(301),gt=a(2),ht=a(300),vt=a(92),Et=a.n(vt),bt=a(91),yt=a.n(bt),Ot=function(e){Object(g.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleNext=function(){a.setState({activeStep:a.state.activeStep+1})},a.handleBack=function(){a.setState({activeStep:a.state.activeStep-1})},a.state={activeStep:0},a}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.images,n=e.classes,i=t.length;return r.a.createElement("div",null,r.a.createElement("img",{className:n.img,src:0===i?a(125):t[this.state.activeStep],alt:"".concat(this.state.activeStep)}),i>1&&r.a.createElement(ht.a,{steps:i,position:"static",variant:"dots",activeStep:this.state.activeStep,nextButton:r.a.createElement(C.a,{size:"small",onClick:this.handleNext,disabled:this.state.activeStep===i-1},"Next",r.a.createElement(yt.a,null)),backButton:r.a.createElement(C.a,{size:"small",onClick:this.handleBack,disabled:0===this.state.activeStep},r.a.createElement(Et.a,null),"Back")}))}}]),n}(r.a.Component),It=Object(Ke.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{overflow:"hidden",display:"block",width:"100%"}}}))(Ot),xt=Object(m.a)((function(e){return{button:{backgroundColor:e.palette.primary.main,color:"white",fontWeight:300,margin:"0 auto",padding:"1rem 1.5rem"},textBody:{fontWeight:300},tags:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},wishlist:{listStyle:"none",marginTop:0,fontFamily:"Montserrat","& > *":{fontWeight:300,marginTop:e.spacing(1),fontSize:"1.1rem"}},detailTitle:{fontWeight:400,color:e.palette.primary.main,fontSize:"1.2rem",fontFamily:"Montserrat"},qtyVal:{fontWeight:300,color:"black"},trade:{marginBottom:e.spacing(.5)}}}));var Nt=Object(s.b)((function(e){return{currentUser:e.currentUser.user}}),(function(e){return{openOfferingModal:function(){return e({type:"OPEN_OFFER_MODAL"})},openLoginModal:function(t){return e(ve(t))},displayWarning:function(t){return e(function(e){return{type:"WARNING_SNACKBAR",warningMessage:e}}(t))}}}))((function(e){var t=e.itemDetail,a=e.currentUser,n=t.images,i=t.quantity,c=t.condition,o=t.requestedItems,l=t.tags,s=xt(),u=Object(Ee.f)(),m=Object(Ee.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{item:!0,xs:7},r.a.createElement(It,{images:n})),r.a.createElement(lt.a,{item:!0,xs:4},r.a.createElement(lt.a,{container:!0,alignItems:"center",direction:"column"},function(e,a){var n=a.openOfferingModal,i=a.editPosting,c=a.openLoginModal,o=a.displayWarning;return null===e?r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){o("Please sign in or register before making an offer."),c("MAKE_OFFER_BUTTON")}},"Make Offer"):e._id!==t.ownerId?r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){n()}},"Make Offer"):r.a.createElement(C.a,{onClick:i,variant:"outlined",color:"primary"},"Edit Posting")}(a,{openOfferingModal:e.openOfferingModal,editPosting:function(){u.push(m.pathname+"/edit")},openLoginModal:e.openLoginModal,displayWarning:e.displayWarning}),r.a.createElement(Je.a,{my:3,width:"60%"},r.a.createElement("p",{className:s.detailTitle},"Quantity: ",r.a.createElement("span",{className:s.qtyVal},i)),r.a.createElement("p",{className:s.detailTitle},"Condition:"," ",r.a.createElement("span",{className:s.qtyVal},at.a.startCase(c))),r.a.createElement("p",{className:Object(gt.a)(s.detailTitle,s.trade)},"Looking to trade for:"),r.a.createElement("ul",{className:s.wishlist},o.length>=1?o.map((function(e,t){var a=at.a.startCase(at.a.toLower(e));return r.a.createElement("li",{key:t},a)})):r.a.createElement("li",null,"Open to Anything"))),r.a.createElement("div",{className:s.tags},l.map((function(e,t){return r.a.createElement(ft.a,{label:e,key:t,spacing:2,variant:"outlined",color:"primary"})}))))))})),Ct=Object(m.a)((function(){return{content:{margin:0,padding:0}}})),jt=function(e){var t=Ct(),a=e.itemDetail;return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt,{itemDetail:a}),r.a.createElement(lt.a,{container:!0,spacing:2,className:t.content},r.a.createElement(Nt,{itemDetail:a}),r.a.createElement(ut,{itemDetail:a})))},St=a(12),wt="".concat("http://localhost:5000/api"),kt=function(e){return{type:"ADD_POSTING",posting:e}},At=function(e){return{type:"LOAD_POSTINGS",postings:e}},Dt=function(e){return{type:"LOAD_ITEM_DETAIL",item:e}},Tt=function(e,t){return{type:"UPDATE_ITEM_DETAIL",itemId:e,details:t}},Ft=function(e){return{type:"DELETE_POSTING",itemId:e}},Lt=function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){var n,r;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(ke(!0)),n=e?"".concat(wt,"/postings/search/").concat(e):"".concat(wt,"/postings"),t.next=5,re.a.get(n);case 5:r=t.sent,a(At(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(ie("Postings could not be loaded. Please try again later"));case 12:return t.prev=12,a(ke(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(e){return t.apply(this,arguments)}}()},Rt=function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){var n,r,i,c,o;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(ke(!0)),t.next=4,re.a.get("".concat(wt,"/postings/").concat(e));case 4:return n=t.sent,r=n.data.ownerId?n.data.ownerId:0,t.next=8,re.a.get("".concat(wt,"/users/").concat(r,"/complete"));case 8:return i=t.sent,c={ownerUsername:i.data.userName?i.data.userName:"Unavailable",ownerReviews:i.data.reviews},o=Object(St.a)(Object(St.a)({},n.data),c),a(Dt(o)),t.abrupt("return","success");case 15:return t.prev=15,t.t0=t.catch(0),a(ie("Item could not be loaded. Please try again later")),t.abrupt("return","error");case 19:return t.prev=19,a(ke(!1)),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[0,15,19,22]])})));return function(e){return t.apply(this,arguments)}}()},Bt=function(){return{type:"CLEAR_OLD_POSTINGS"}},Pt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).redirect=Object(ae.a)(te.a.mark((function t(){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.history.goBack();case 1:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(ae.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location.pathname.split("=")[1],e.next=3,this.props.loadItemDetail(t);case 3:"error"===e.sent&&this.props.history.push("/OhNo!");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.itemDetail;return 0!==Object.keys(a).length?r.a.createElement("div",null,r.a.createElement("div",{className:t.buttonHeader},r.a.createElement(C.a,{onClick:this.redirect},"< Back")),r.a.createElement(Xe.a,{className:t.root},r.a.createElement(jt,{itemDetail:a}),r.a.createElement(D.a,{className:t.divider}),r.a.createElement(ot,{itemDetail:a}))):null}}]),a}(r.a.Component),_t=Object(s.b)((function(e){return{itemDetail:e.itemDetail}}),{loadItemDetail:Rt})(Object(Ee.h)(Object(Ke.a)((function(e){return{root:{fontFamily:"Montserrat"},buttonHeader:{display:"flex",justifyContent:"space-between",margin:e.spacing(1)},divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3)}}}))(Pt))),Ut=a(302),Mt=a(142),qt=a.n(Mt),Wt=a(143),Gt=a.n(Wt),zt=Object(m.a)((function(e){return{root:{display:"flex",alignItems:"center",width:"75%"},input:{marginLeft:e.spacing(1),flex:1,width:"70%"},iconButton:{padding:10},divider:{height:28,margin:4}}}));var Ht=Object(s.b)(null,{loadPostingsByQuery:Lt,clearOldPostings:Bt})((function(e){var t=zt(),a=Object(Ee.f)(),i=Object(n.useState)(""),c=Object(o.a)(i,2),l=c[0],s=c[1],u=function(){var t=Object(ae.a)(te.a.mark((function t(){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.clearOldPostings(),t.next=3,e.loadPostingsByQuery("search=".concat(l));case 3:a.push({pathname:"/items",search:"search=".concat(l)});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(mt.a,{className:t.root},r.a.createElement(b.a,{className:t.iconButton,"aria-label":"menu"},r.a.createElement(O.a,null)),r.a.createElement(Ut.a,{className:t.input,placeholder:"I am looking for",inputProps:{"aria-label":"search google maps"},onChange:function(e){s(e.target.value)}}),r.a.createElement(b.a,{type:"submit",className:t.iconButton,"aria-label":"search",onClick:u},r.a.createElement(qt.a,null)),r.a.createElement(D.a,{className:t.divider,orientation:"vertical"}),r.a.createElement(b.a,{color:"primary",className:t.iconButton,"aria-label":"directions"},r.a.createElement(Gt.a,null)))})),Vt=a(276),Qt=a(277),Zt=a(280),Yt=a(279),Xt=a(278),Kt=function(e){var t=e.isReadOnly,a=r.a.useState(0),n=Object(o.a)(a,2),i=n[0],c=n[1];return r.a.createElement($e.a,{name:"simple-controlled",value:i,onChange:function(e,t){c(t)},readOnly:t})},Jt=Object(m.a)((function(){return{tradeItemCard:{maxWidth:"25rem"},tradeItemCardImg:{height:"10rem"},bottom:{display:"flex",justifyContent:"space-between"}}})),$t=Object(s.b)((function(e){return{error:e.error}}),{clearOldItemDetails:function(){return{type:"CLEAR_OLD_ITEM_DETAILS"}}})((function(e){var t=e._id,n=e.title,i=e.date,c=e.location,o=e.images,l=e.clearOldItemDetails,s=Jt(),u=Object(Ee.f)(),m=function(e){l(),u.push({pathname:"/items/item="+e})};return r.a.createElement(Vt.a,{className:s.tradeItemCard,elevation:2},r.a.createElement(Qt.a,{onClick:function(){return m(t)}},r.a.createElement(Xt.a,{className:s.tradeItemCardImg,image:o.length>0?o[0]:a(125),title:"Tradeforce"}),r.a.createElement(Yt.a,null,r.a.createElement(lt.a,{container:!0,spacing:2},r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(et.a,{variant:"body2"},function(e){var t=new Date,a=Math.abs(t-new Date(e)),n=Math.round(a/864e5);return n<30?0===n?"Posted today":1===n?"Posted "+n+" day ago":"Posted "+n+" days ago":n>=30&&n<=365?1===Math.round(n/30)?"Posted "+Math.round(n/30)+" month ago":"Posted "+Math.round(n/30)+" months ago":1===Math.round(n/365)?"Posted "+Math.round(n/365)+" year ago":"Posted "+Math.round(n/365)+" years ago"}(i))),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(et.a,{variant:"h6",component:"h2",color:"primary"},n||"Untitled")),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(et.a,{variant:"body2",color:"textPrimary",component:"p"},c))))),r.a.createElement(Zt.a,{className:s.bottom},r.a.createElement(C.a,{size:"small",color:"primary",onClick:function(){return m(t)}},"Details"),r.a.createElement(Kt,{isReadOnly:!0})))})),ea=Object(m.a)({itemPreviewContainer:{minHeight:"47.5vh"}}),ta=function(e){var t=ea(),a=e.items,n=e.sizing;return r.a.createElement(lt.a,{container:!0,direction:"row",spacing:4,className:t.itemPreviewContainer,alignContent:"center",alignItems:"center"},a.map((function(e,t){return r.a.createElement(lt.a,{key:t,item:!0,xs:n},r.a.createElement($t,{_id:e._id,title:e.title,date:e.date,location:e.location,images:e.images}))})))},aa=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.replace("?","");this.props.loadPostingsByQuery(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.postings;return r.a.createElement(Xe.a,{className:t.root},r.a.createElement("div",{className:t.search},r.a.createElement(Ht,null)),r.a.createElement(ta,{items:a,sizing:3}))}}]),a}(r.a.Component),na=Object(s.b)((function(e){return{postings:e.postings}}),{loadPostingsByQuery:Lt})(Object(Ee.h)(Object(Ke.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},search:{margin:e.spacing(7,0),width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}}}))(aa))),ra=Object(m.a)((function(e){return{card:{display:"flex",width:"10vw",height:"10vw",alignItems:"center",flexDirection:"column",margin:e.spacing(1)},image:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"100%"},categoryName:{fontWeight:300}}})),ia=Object(s.b)(null,{clearOldPostings:Bt})((function(e){var t=e.label,n=e.value,i=e.clearOldPostings,c=ra(),o=Object(Ee.f)();return r.a.createElement("div",null,r.a.createElement(mt.a,{elevation:0,className:c.card,onClick:function(){return i(),void o.push({pathname:"/items",search:"category=".concat(n)})}},r.a.createElement("img",{src:a(194)("./".concat(n,".jpg")),alt:t,className:c.image}),r.a.createElement(et.a,{variant:"h5",className:c.categoryName},t)))})),ca=Object(m.a)((function(e){return{root:{backgroundColor:"white",position:"relative",flexGrow:1},categoriesTitle:{color:"#1d588f",paddingLeft:"10%",paddingTop:e.spacing(2),fontStyle:"italic",fontWeight:"normal",marginTop:e.spacing(1)},container:{display:"flex",flexDirection:"row",alignContent:"center",paddingLeft:"10%",textAlign:"center"},categoryCards:{paddingBottom:"3%"}}}));function oa(){var e=ca();return r.a.createElement("div",{className:e.root},r.a.createElement("h1",{className:e.categoriesTitle},"Categories"),r.a.createElement(lt.a,{container:!0,className:e.container},Ve.map((function(t,a){return 0===a&&(t={value:"all",label:"All"}),r.a.createElement(lt.a,{key:a,item:!0,xs:3,className:e.categoryCards},r.a.createElement(ia,{label:t.label,value:t.value}))}))))}var la=Object(m.a)((function(){return{backgroundImage:{position:"absolute",width:"100%",height:"300%",opacity:"35%",top:"-110%",zIndex:"-1",objectFit:"cover"},searchBar:{position:"absolute",width:"80%",top:"35%",left:"20%"},container:{position:"relative",height:"18rem"}}}));function sa(){var e=la();return r.a.createElement("div",null,r.a.createElement("div",{className:e.container},r.a.createElement("img",{src:a(203),alt:"Background",className:e.backgroundImage}),r.a.createElement("div",{className:e.searchBar},r.a.createElement(Ht,{className:e.searchBar}))),r.a.createElement(oa,null))}var ua=a(303),ma=Object(m.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(5),height:e.spacing(5)},large:{width:e.spacing(20),height:e.spacing(20)}}}));function da(e){var t=e.isLargeAvatar,a=e.userProfileImgSrc,n=ma();return r.a.createElement("div",{className:n.root},r.a.createElement(ua.a,{alt:"User Image",src:a,className:t?n.large:n.small}))}var pa=a(144),fa=a.n(pa),ga=Object(m.a)((function(e){return{profile:{fontFamily:"Montserrat",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginBottom:e.spacing(5)},name:{fontSize:"1.2rem",fontWeight:400},username:{fontSize:".9rem",fontWeight:300}}})),ha=Object(s.b)(null,{displayError:ie})((function(e){var t=e.userDetail,a=ga();return r.a.createElement("div",{className:a.profile},r.a.createElement(da,{isLargeAvatar:!0,userProfileImgSrc:t.profilePic?t.profilePic:fa.a}),r.a.createElement(et.a,{className:a.name},"".concat(t.firstName," ").concat(t.lastName)),r.a.createElement(et.a,{className:a.username},t.userName))})),va=a(145),Ea=a.n(va),ba=a(293),ya=a(281),Oa=a(151),Ia=Object(m.a)((function(){return{panel:{backgroundColor:"#F4F4F4",fontFamily:"Montserrat"}}}));var xa=function(e){var t=e.children,a=e.value,n=e.index,i=Object(Oa.a)(e,["children","value","index"]),c=Ia();return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,"aria-labelledby":"force-tab-".concat(n)},i,{className:c.panel}),a===n&&r.a.createElement(Je.a,{p:3},t))},Na=Object(m.a)((function(){return{value:{fontWeight:500,fontSize:"1.6rem"},title:{fontWeight:300,fontSize:"0.9rem",textTransform:"capitalize"}}}));var Ca=function(e){var t=e.value,a=e.title,n=Na();return r.a.createElement(r.a.Fragment,null,r.a.createElement(et.a,{className:n.value},t),r.a.createElement(et.a,{className:n.title},a))},ja=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.setState({value:t})},n.state={value:0},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.userDetail,n=e.currentUser,i=e.openReviewModal;return r.a.createElement(mt.a,{className:t.root},r.a.createElement(ba.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary","aria-label":"auto tabs example",centered:!0},r.a.createElement(ya.a,{label:r.a.createElement(Ca,{value:a.activePostings.length,title:"Item Postings"}),className:t.tab}),r.a.createElement(ya.a,{label:r.a.createElement(Ca,{value:a.inactivePostings.length,title:"Items Traded"}),className:t.tab}),r.a.createElement(ya.a,{label:r.a.createElement(Ca,{value:a.reviews.length,title:"Reviews"}),className:t.tab}),n&&a._id===n._id?r.a.createElement(ya.a,{label:r.a.createElement(Ca,{value:6,title:"Offers"}),className:t.tab}):null),r.a.createElement(xa,{value:this.state.value,index:0},r.a.createElement(ta,{items:a.activePostings,sizing:2})),r.a.createElement(xa,{value:this.state.value,index:1},r.a.createElement(ta,{items:a.inactivePostings,sizing:2})),r.a.createElement(xa,{value:this.state.value,index:2},n&&a._id!==n._id&&r.a.createElement("div",{className:t.reviewButtonContainer},r.a.createElement(C.a,{onClick:i,className:t.reviewButton},"Add Review")),r.a.createElement(it,{elevation:1,colour:"#FFFFFF",reviews:a.reviews})),r.a.createElement(xa,{value:this.state.value,index:3},"Item Three"))}}]),a}(r.a.Component),Sa=Object(Ke.a)((function(e){return{root:{flexGrow:1},tab:{margin:e.spacing(0,5)},reviewButton:{color:e.palette.primary.main},reviewButtonContainer:{display:"flex",justifyContent:"flex-end"}}}))(ja),wa=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(ae.a)(te.a.mark((function e(){var t,a,n,r,i,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.location,n=t.currentUser,r=t.loadUserDetails,i=t.history,c=a.pathname.split("=")[1],e.next=4,r({userId:c,currentUserId:n?n._id:null});case 4:"success"!==e.sent&&i.push("/UserNotFound");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.userDetail,a=e.currentUser,n=e.classes,i=e.openReviewModal;return 0!==Object.keys(t).length?r.a.createElement("div",null,r.a.createElement("div",{className:n.hero}),r.a.createElement("div",{className:n.container},r.a.createElement(ha,{userDetail:t,currentUser:a}),r.a.createElement(Sa,{userDetail:t,currentUser:a,openReviewModal:i}))):null}}]),a}(r.a.Component),ka=Object(s.b)((function(e){return{userDetail:e.userDetail,currentUser:e.currentUser.user}}),(function(e){return{displayError:function(t){return e(ie(t))},loadUserDetails:function(t){var a=t.userId,n=t.currentUserId;return e(De({userId:a,currentUserId:n}))},openReviewModal:function(){return e({type:"OPEN_REVIEW_MODAL"})}}}))(Object(Ee.h)(Object(Ke.a)((function(){return{hero:{position:"relative",height:"20vh",backgroundImage:"url("+Ea.a+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center center",zIndex:"-2",opacity:"0.7"},container:{width:"100%",zIndex:"-1",marginTop:"-85px"},profile:{display:"flex",justifyContent:"center"},avatar:{position:"absolute",top:0},box:{}}}))(wa))),Aa=a(30),Da=a(35),Ta=a(292),Fa=Object(m.a)((function(e){return{tags:{margin:e.spacing(.5)}}})),La=function(e){var t=e.change,a=e.state,n=e.addTag,i=e.deleteTag,c=a.title,o=a.description,l=a.category,s=a.condition,u=a.quantity,m=a.tags,d=a.errors,p=Fa();return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{container:!0,className:p.form,spacing:1},r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,label:"Title",className:p.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"title",onChange:t,defaultValue:c,error:!!d.title,helperText:d.title})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,multiline:!0,rows:4,label:"Description",className:p.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"description",onChange:t,defaultValue:o,error:!!d.description,helperText:d.description})),r.a.createElement(lt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ta.a,{required:!0,id:"outlined-select-category-native",select:!0,label:"Category",margin:"dense",fullWidth:!0,SelectProps:{native:!0},variant:"outlined",onChange:t,name:"category",defaultValue:l,error:!!d.category,helperText:d.category},Ve.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))),r.a.createElement(lt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ta.a,{required:!0,id:"outlined-select-condition-native",select:!0,label:"Condition",margin:"dense",fullWidth:!0,SelectProps:{native:!0},variant:"outlined",onChange:t,name:"condition",defaultValue:s,error:!!d.condition,helperText:d.condition},Qe.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))),r.a.createElement(lt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ta.a,{label:"Tags",className:p.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"tags",defaultValue:"",onKeyUp:n,placeholder:10===m.length?"Tag limit reached":"Press enter to add tag",disabled:m.length>=10})),r.a.createElement(lt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ta.a,{required:!0,label:"Quantity",className:p.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"quantity",defaultValue:u,onChange:t,type:"number",inputProps:{min:"1"},error:!!d.quantity,helperText:d.quantity})),m.map((function(e,t){return r.a.createElement(ft.a,{key:t,color:"primary",size:"small",onDelete:function(){i("tags",t)},label:e,className:p.tags})}))))},Ra=a(93),Ba=a.n(Ra),Pa=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).setHighlighted=function(e){n.setState({highlighted:e})},n.processFiles=function(e){Array.from(e).filter((function(e){return"image/png"===e.type||"image/jpeg"===e.type})).forEach((function(e){var t=new FileReader;t.onloadend=function(){n.props.addImage([t.result])},t.readAsDataURL(e)}))},n.state={highlighted:!1},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.images,i=t.deleteImage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.state.highlighted?"".concat(a.dropzone," ").concat(a.dropzoneDrop):"".concat(a.dropzone),onDragEnter:function(){return e.setHighlighted(!0)},onDragLeave:function(){return e.setHighlighted(!1)},onDragOver:function(e){e.preventDefault()},onDrop:function(t){t.preventDefault(),e.setHighlighted(!1),e.processFiles(t.dataTransfer.files)}},r.a.createElement(Ba.a,{className:a.uploadIcon}),r.a.createElement("h4",{className:a.dropText},"Drop your files here"),r.a.createElement("label",{className:a.browseButton},r.a.createElement("input",{type:"file",multiple:!0,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onChange:function(t){e.processFiles(t.target.files)},className:a.input}),"Browse")),r.a.createElement("div",{className:a.imgContainer},n.map((function(e,t){return r.a.createElement("div",{key:t,className:a.imgDiv},r.a.createElement("img",{src:e,alt:"something",className:a.imgPreview}),r.a.createElement(b.a,{"aria-label":"delete image",component:"span",className:a.deleteButton,onClick:function(){return i("images",t)}},r.a.createElement(q.a,null)))}))))}}]),a}(r.a.Component),_a=Object(Ke.a)((function(e){return{dropzone:{border:"2px dashed ".concat(e.palette.text.disabled),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& > *":{margin:e.spacing(1)}},dropzoneDrop:{backgroundColor:"#DBEAF8",border:"2px dashed ".concat(e.palette.info.main)},uploadIcon:{fontSize:"8rem",color:e.palette.text.disabled},dropText:{fontWeight:300,fontSize:"2rem",color:e.palette.text.secondary},browseButton:{color:e.palette.info.main,border:"1px solid ".concat(e.palette.info.main),fontSize:"0.875rem",lineHeight:"1.75",borderRadius:"4px",textTransform:"uppercase",padding:"5px 15px",boxSizing:"border-box",cursor:"pointer"},input:{display:"none"},imgPreview:{height:100},imgContainer:{display:"flex",flexWrap:"wrap"},deleteButton:{margin:0,padding:0,position:"absolute",right:"0",top:"0",color:"red"},imgDiv:{margin:e.spacing(1),position:"relative"}}}))(Pa),Ua=Object(m.a)((function(e){return{tags:{fontSize:"20px",margin:e.spacing(1,0)},chipContainer:{width:"50%",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center"}}})),Ma=function(e){var t=e.requests,a=e.addRequest,n=e.deleteRequest,i=Ua();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ta.a,{label:"Requested Items",className:i.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"requestedItems",defaultValue:"",onKeyUp:a,placeholder:t.length>=5?"Request limit reached":"Press enter to add request",disabled:t.length>=5}),r.a.createElement("div",{className:i.chipContainer},0!==t.length&&t?t.map((function(e,t){return r.a.createElement(ft.a,{key:t,color:"primary",onDelete:function(){n("requestedItems",t)},label:e,className:i.tags,variant:"outlined"})})):r.a.createElement(et.a,null,"No requested items specified for exchange")))},qa=a(146),Wa=a.n(qa),Ga=a(282),za=a(283),Ha=a(286),Va=a(284),Qa=a(285),Za=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.submitAction,n=e.submitName,i=e.dialogMessage,c=e.dialogTitle,o=e.handleClose;return r.a.createElement(Ga.a,{open:t,onClose:o},r.a.createElement(za.a,{id:"alert-dialog-title"},c),r.a.createElement(Va.a,null,r.a.createElement(Qa.a,{id:"alert-dialog-description"},i),r.a.createElement(Ha.a,null,r.a.createElement(C.a,{onClick:o,color:"primary"},"Cancel"),r.a.createElement(C.a,{onClick:a,color:"primary"},n))))}}]),a}(r.a.Component),Ya=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).redirect=function(){n.props.history.goBack()},n.isFormInvalid=function(){var e=at.a.pick(n.state,["title","description","category","condition"]),t=at.a.values(e).some((function(e){return 0===e.length}));return n.state.quantity<1||t},n.validateInput=function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1],i=n.state.errors;switch(a){case"title":i.title=r.length>0?"":"Title cannot be left blank";break;case"description":i.description=r.length>0?"":"Description cannot be left blank";break;case"category":i.category=r.length>0?"":"Category must be selected";break;case"condition":i.condition=r.length>0?"":"Condition must be selected";break;case"quantity":i.quantity=r>0?"":"Quantity must be greater than 0"}n.setState({errors:i})},n.validateRequiredFields=function(){var e=at.a.toPairs(at.a.pick(n.state,["title","description","category","condition","quantity"]));return at.a.forEach(e,n.validateInput),n.isFormInvalid()},n.updateChangedFields=function(e){at.a.includes(n.state.changedFields,e)||n.setState({changedFields:[].concat(Object(Da.a)(n.state.changedFields),[e])})},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.validateInput([a,r]),n.setState(Object(Aa.a)({},a,r)),n.updateChangedFields(a)},n.handleAddtoList=function(e){"Enter"===e.key&&(e.preventDefault(),n.setState(Object(Aa.a)({},e.target.name,[].concat(Object(Da.a)(n.state[e.target.name]),[e.target.value]))),n.updateChangedFields(e.target.name),e.target.value="")},n.handleRemoveFromList=function(e,t){var a=n.state[e].filter((function(e,a){return a!==t}));n.setState(Object(Aa.a)({},e,a)),n.updateChangedFields(e)},n.handleAddImage=function(e){n.setState({images:[].concat(Object(Da.a)(n.state.images),Object(Da.a)(e))}),n.updateChangedFields("images")},n.handleSubmit=Object(ae.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.validateRequiredFields()){e.next=7;break}return t=at.a.pick(n.state,n.state.changedFields),e.next=4,n.props.updateItemDetail(n.state._id,t);case 4:n.redirect(),e.next=8;break;case 7:window.alert("Please fill required fields");case 8:case"end":return e.stop()}}),e)}))),n.handleDeletePosting=Object(ae.a)(te.a.mark((function e(){var t,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.history,r=t.deletePosting,e.next=3,r(n.state._id);case 3:a.go(-2);case 4:case"end":return e.stop()}}),e)}))),n.handleConfirmationClose=function(){n.setState({confirmationOpen:!1})},n.handleConfirmationOpen=function(e){n.setState({confirmationOpen:!0,confirmationType:e})},n.selectConfirmationToDisplay=function(){switch(n.state.confirmationType){case"delete":return r.a.createElement(Za,{open:n.state.confirmationOpen,submitAction:n.handleDeletePosting,submitName:"Delete",dialogMessage:"This action cannot be undone",dialogTitle:"Are you sure you want to delete this posting?",handleClose:n.handleConfirmationClose});default:return r.a.createElement(Za,{open:n.state.confirmationOpen,submitAction:n.redirect,submitName:"OK",dialogMessage:"Any changes will not be saved",dialogTitle:"Are you sure you want to leave this page?",handleClose:n.handleConfirmationClose})}};var i=e.itemDetail;return n.state=Object(St.a)(Object(St.a)({},i),{},{errors:{title:"",description:"",category:"",condition:"",quantity:""},changedFields:[],confirmationOpen:!1,confirmationType:""}),n}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,this.state.confirmationOpen&&this.selectConfirmationToDisplay(),r.a.createElement("div",{className:t.buttonHeader},r.a.createElement(C.a,{onClick:function(){return e.handleConfirmationOpen("redirect")}},"< Back to Posting"),r.a.createElement(C.a,{onClick:function(){return e.handleConfirmationOpen("delete")},startIcon:r.a.createElement(Wa.a,null),className:t.cancelButton},"Delete Posting")),r.a.createElement(Xe.a,null,r.a.createElement("div",{className:t.section},r.a.createElement(La,{change:this.handleInputChange,addTag:this.handleAddtoList,state:this.state,deleteTag:this.handleRemoveFromList})),r.a.createElement("div",{className:t.section},r.a.createElement(_a,{change:this.handleInputChange,addImage:this.handleAddImage,images:this.state.images,deleteImage:this.handleRemoveFromList})),r.a.createElement("div",{className:t.section},r.a.createElement(Ma,{addRequest:this.handleAddtoList,deleteRequest:this.handleRemoveFromList,requests:this.state.requestedItems})),r.a.createElement("div",{className:t.buttonHeader},r.a.createElement(C.a,{onClick:function(){return e.handleConfirmationOpen("redirect")},variant:"outlined",className:t.cancelButton},"Cancel"),r.a.createElement(C.a,{onClick:this.handleSubmit,variant:"contained",color:"primary"},"Save"))))}}]),a}(r.a.Component),Xa=Object(s.b)((function(e){return{itemDetail:e.itemDetail}}),{updateItemDetail:function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n){return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(ke(!0)),a.next=4,re.a.patch("".concat(wt,"/postings/").concat(e),t);case 4:n(Tt(e,t)),n(ce("Posting was successfully updated")),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n(ie("Something went wrong. Posting was not updated"));case 11:return a.prev=11,n(ke(!1)),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})));return function(e){return a.apply(this,arguments)}}()},deletePosting:function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(ke(!0)),t.next=4,re.a.delete("".concat(wt,"/postings/").concat(e));case 4:a(Ft(e)),a(ce("Posting was successfully deleted")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(ie("Something went wrong. Posting was not deleted"));case 11:return t.prev=11,a(ke(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(Ee.h)(Object(Ke.a)((function(e){return{buttonHeader:{display:"flex",justifyContent:"space-between",margin:e.spacing(1)},section:{margin:e.spacing(2,0)},cancelButton:{color:"#AD343E",borderColor:"#AD343E"}}}))(Ya))),Ka=function(){return r.a.createElement(Xe.a,null,r.a.createElement(et.a,null,"Whoops!"))};var Ja=Object(Ee.h)((function(e){var t=e.history;return Object(n.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[t]),null})),$a=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,null),r.a.createElement(Ee.c,null,r.a.createElement(Ee.a,{exact:!0,path:"/"},r.a.createElement(sa,null)),r.a.createElement(Ee.a,{exact:!0,path:"/items/item=:id"},r.a.createElement(_t,null)),r.a.createElement(Ee.a,{path:"/items/item=:id/edit"},r.a.createElement(Xa,null)),r.a.createElement(Ee.a,{path:"/items"},r.a.createElement(na,null)),r.a.createElement(Ee.a,{exact:!0,path:"/profile/user=:id"},r.a.createElement(ka,null)),r.a.createElement(Ee.a,null,r.a.createElement(Ka,null))))},en=a(304),tn=a(287),an=a(295),nn=function(e){var t=e.activeStep;return r.a.createElement(en.a,{activeStep:t},["Item Details","Images","Requested Items","Review"].map((function(e){return r.a.createElement(tn.a,{key:e},r.a.createElement(an.a,null,e))})))},rn=Object(m.a)((function(e){return{tags:{margin:e.spacing(.5)},heading:{fontWeight:300,fontSize:"1.2rem"},staticTitle:{color:e.palette.primary.main,fontWeight:500,textTransform:"uppercase"},content:{fontWeight:300},gridItem:{borderBottom:"1px solid ".concat(e.palette.text.disabled)}}})),cn=function(e){var t=e.state,a=t.title,n=t.description,i=t.category,c=t.condition,o=t.quantity,l=t.tags,s=rn();return r.a.createElement(lt.a,{container:!0,spacing:4},r.a.createElement(lt.a,{item:!0,container:!0,sm:6,xs:12,className:s.gridItem},r.a.createElement(et.a,{className:s.staticTitle},"Title:\xa0"),r.a.createElement(et.a,{className:s.content},a)),r.a.createElement(lt.a,{item:!0,container:!0,sm:6,xs:12,className:s.gridItem},r.a.createElement(et.a,{className:s.staticTitle},"Quantity:\xa0"),r.a.createElement(et.a,{className:s.content},o)),r.a.createElement(lt.a,{item:!0,container:!0,xs:12,className:s.gridItem},r.a.createElement(et.a,{className:s.staticTitle},"Description:\xa0"),r.a.createElement(et.a,{className:s.content},n)),r.a.createElement(lt.a,{item:!0,container:!0,sm:6,xs:12,className:s.gridItem},r.a.createElement(et.a,{className:s.staticTitle},"Category:\xa0"),r.a.createElement(et.a,{className:s.content},i)),r.a.createElement(lt.a,{item:!0,container:!0,sm:6,xs:12,className:s.gridItem},r.a.createElement(et.a,{className:s.staticTitle},"Condition:\xa0"),r.a.createElement(et.a,{className:s.content},c)),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(et.a,{className:s.staticTitle},"Tags:\xa0"),l.map((function(e,t){return r.a.createElement(ft.a,{key:t,color:"primary",size:"small",label:e,className:s.tags})}))))},on=a(288),ln=a(94),sn=a.n(ln),un=Object(m.a)((function(e){return{headingContainer:{"&:last-child":{paddingBottom:"16px"}},heading:{fontWeight:300,fontSize:"1.2rem"},chips:{margin:e.spacing(.5)},staticTitle:{color:e.palette.primary.main,fontWeight:500,textTransform:"uppercase"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},expandIconContainer:{display:"inline-grid",justifyItems:"center",alignContent:"center"}}})),mn=function(e){var t=e.returnToActiveStep,a=e.handleExpand,n=e.children,i=e.sectionTitle,c=e.panelIdx,o=e.expandedIdx,l=un(),s=c===o;return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{container:!0,item:!0,alignContent:"flex-start",className:l.itemContainer,spacing:2},r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(lt.a,{item:!0,sm:12},r.a.createElement(Vt.a,null,r.a.createElement(lt.a,{container:!0,alignContent:"center",justify:"center"},r.a.createElement(lt.a,{item:!0,xs:11},r.a.createElement(Yt.a,{className:l.headingContainer},r.a.createElement(lt.a,{container:!0,alignContent:"center"},r.a.createElement(lt.a,{container:!0,item:!0,xs:12},r.a.createElement(et.a,{className:l.heading},i))))),r.a.createElement(lt.a,{item:!0,xs:1,className:l.expandIconContainer},r.a.createElement(b.a,{className:Object(gt.a)(l.expand,Object(Aa.a)({},l.expandOpen,s)),onClick:function(){a(c)},"aria-expanded":s,"aria-label":"show more"},r.a.createElement(sn.a,null)))),r.a.createElement(on.a,{in:s},r.a.createElement(Yt.a,null,n),r.a.createElement(D.a,null),r.a.createElement(lt.a,{container:!0,item:!0,xs:12,justify:"flex-end"},r.a.createElement(Zt.a,null,r.a.createElement(C.a,{size:"small",color:"primary",onClick:function(){t(i)}},"Edit")))))))))},dn=Object(m.a)((function(e){return{heading:{fontWeight:300,fontSize:"1.2rem"},chips:{margin:e.spacing(.5)},staticTitle:{color:e.palette.primary.main,fontWeight:500,textTransform:"uppercase"},imgPreview:{height:75,margin:e.spacing(1)},imgContainer:{display:"flex",flexWrap:"wrap"}}})),pn=function(e){var t=e.state,a=e.returnToActiveStep,i=dn(),c=Object(n.useState)(-1),l=Object(o.a)(c,2),s=l[0],u=l[1],m=function(e){u(s===e?-1:e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{container:!0,spacing:1},r.a.createElement(mn,{sectionTitle:"Item Details",returnToActiveStep:a,handleExpand:m,panelIdx:0,expandedIdx:s},r.a.createElement(cn,{state:t})),r.a.createElement(mn,{sectionTitle:"Images",returnToActiveStep:a,handleExpand:m,panelIdx:1,expandedIdx:s},r.a.createElement("div",{className:i.imgContainer},t.images.map((function(e,t){return r.a.createElement("img",{src:e,key:t,alt:"something",className:i.imgPreview})})))),r.a.createElement(mn,{sectionTitle:"Requested Items",returnToActiveStep:a,handleExpand:m,panelIdx:2,expandedIdx:s},0!==t.requestedItems.length&&t.requestedItems?t.requestedItems.map((function(e,t){return r.a.createElement(ft.a,{key:t,color:"primary",variant:"outlined",label:e,className:i.chips})})):r.a.createElement(et.a,null,"No requested items specified for exchange"))))},fn=Object(m.a)((function(e){return{form:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(3)}},link:{textDecoration:"none"}}})),gn=function(e){var t=e.closeModal,a=e.id,n=e.loadItemDetail,i=fn(),c=Object(Ee.f)(),o=function(){var e=Object(ae.a)(te.a.mark((function e(r){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,n(a);case 3:"success"===e.sent&&c.push("/items/item=".concat(a)),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:i.form},r.a.createElement(et.a,null,"You have successfully created a new posting."),r.a.createElement(He.a,{href:"#",onClick:o,className:i.link},r.a.createElement(et.a,{variant:"h4",color:"primary"},"tradeforce.com/".concat(a))),r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){t()}},"Close")))},hn=["Item Details","Images","Requested Items","Review"],vn=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).isFormInvalid=function(){var e=at.a.pick(n.state,["title","description","category","condition"]),t=at.a.values(e).some((function(e){return 0===e.length}));return n.state.quantity<1||t},n.resetPostingFields=function(){n.setState({title:"",description:"",category:"",condition:"",tags:[],images:[],requestedItems:[],quantity:1})},n.validateInput=function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1],i=n.state.errors;switch(a){case"title":i.title=r.length>0?"":"Title cannot be left blank";break;case"description":i.description=r.length>0?"":"Description cannot be left blank";break;case"category":i.category=r.length>0?"":"Category must be selected";break;case"condition":i.condition=r.length>0?"":"Condition must be selected";break;case"quantity":i.quantity=r>0?"":"Quantity must be greater than 0"}n.setState({errors:i})},n.validateRequiredFields=function(){var e=at.a.toPairs(at.a.pick(n.state,["title","description","category","condition","quantity"]));return at.a.forEach(e,n.validateInput),n.isFormInvalid()?n.state.activeStep:n.state.activeStep+1},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.validateInput([a,r]),n.setState(Object(Aa.a)({},a,r))},n.handleAddtoList=function(e){"Enter"===e.key&&(e.preventDefault(),n.setState(Object(Aa.a)({},e.target.name,[].concat(Object(Da.a)(n.state[e.target.name]),[e.target.value]))),e.target.value="")},n.handleRemoveFromList=function(e,t){var a=n.state[e].filter((function(e,a){return a!==t}));n.setState(Object(Aa.a)({},e,a))},n.handleAddImage=function(e){n.setState({images:[].concat(Object(Da.a)(n.state.images),Object(Da.a)(e))})},n.setActiveStep=function(e){n.setState({activeStep:e})},n.handleSubmit=Object(ae.a)(te.a.mark((function e(){var t,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=at.a.pick(n.state,["title","description","category","condition","tags","images","requestedItems","quantity"]),n.resetPostingFields(),e.prev=2,e.next=5,n.props.addPosting(t,n.props.currentUser);case 5:a=e.sent,n.setState({activeStep:n.state.activeStep+1,_id:a}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),n.props.closeModal(),n.props.displayError("Something went wrong. Posting was not created");case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),n.handleNext=function(){if(0===n.state.activeStep){var e=n.validateRequiredFields();n.setState({activeStep:e})}else 3===n.state.activeStep?n.handleSubmit():n.setState({activeStep:n.state.activeStep+1})},n.handleBack=function(){n.setState({activeStep:n.state.activeStep-1})},n.handleReset=function(){n.setActiveStep(0)},n.returnToActiveStep=function(e){var t=n.state.activeStep;switch(e){case"Item Details":t=0;break;case"Images":t=1;break;case"Requested Items":t=2}n.setState({activeStep:t})},n.getActiveStepDisplay=function(){switch(n.state.activeStep){case 0:return r.a.createElement(La,{change:n.handleInputChange,addTag:n.handleAddtoList,state:n.state,deleteTag:n.handleRemoveFromList});case 1:return r.a.createElement(_a,{change:n.handleInputChange,addImage:n.handleAddImage,images:n.state.images,deleteImage:n.handleRemoveFromList});case 2:return r.a.createElement(Ma,{addRequest:n.handleAddtoList,deleteRequest:n.handleRemoveFromList,requests:n.state.requestedItems});case 3:return r.a.createElement(pn,{state:n.state,returnToActiveStep:n.returnToActiveStep});case 4:return r.a.createElement(gn,{closeModal:n.props.closeModal,id:n.state._id,loadItemDetail:n.props.loadItemDetail});default:return null}},n.state={activeStep:0,title:"",description:"",category:"",condition:"",tags:[],images:[],requestedItems:[],quantity:1,errors:{title:"",description:"",category:"",condition:"",quantity:""},_id:""},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(mt.a,{className:e.paper},r.a.createElement(et.a,{align:"center",variant:"h4"},"Create A Posting"),r.a.createElement(nn,{activeStep:this.state.activeStep}),r.a.createElement("div",{className:e.form},this.getActiveStepDisplay()),this.state.activeStep<=3&&r.a.createElement("div",{className:e.buttonContainer},r.a.createElement(C.a,{disabled:0===this.state.activeStep,onClick:this.handleBack},"Back"),r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.handleNext},this.state.activeStep===hn.length-1?"Submit":"Next")))}}]),a}(r.a.Component),En=Object(s.b)((function(e){return{currentUser:e.currentUser.user}}),{addPosting:function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n){var r,i;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(ke(!0)),r=Object(St.a)(Object(St.a)({},e),{},{ownerId:t._id,date:new Date,location:t.location?t.location:"The Darkest Timeline"}),a.next=5,re.a.post("".concat(wt,"/postings"),r);case 5:return i=a.sent,n(kt(i.data)),a.abrupt("return",i.data._id);case 10:throw a.prev=10,a.t0=a.catch(0),new Error;case 13:return a.prev=13,n(ke(!1)),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,10,13,16]])})));return function(e){return a.apply(this,arguments)}}()},closeModal:he,displayError:ie,loadItemDetail:Rt})(Object(Ke.a)((function(e){return{paper:{width:"100%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none",position:"relative"},modalHeader:{fontSize:"1.5rem",fontWeight:400,marginBottom:e.spacing(1)},form:{display:"inline-block",width:"100%",minHeight:"270px",marginBottom:e.spacing(3)},header:{display:"inline-block",width:"100%"},buttonContainer:{display:"flex",justifyContent:"space-between"}}}))(vn)),bn=a(147),yn=a.n(bn),On=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleNext=function(){n.setState({activeStep:n.state.activeStep+1})},n.handleBack=function(){n.setState({activeStep:n.state.activeStep-1})},n.state={activeStep:0},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.images,a=e.classes,n=t.length;return r.a.createElement("div",null,r.a.createElement("img",{className:a.img,src:t[this.state.activeStep],alt:"".concat(this.state.activeStep)}),n>1&&r.a.createElement(ht.a,{steps:n,position:"static",variant:"dots",activeStep:this.state.activeStep,nextButton:r.a.createElement(C.a,{size:"small",onClick:this.handleNext,disabled:this.state.activeStep===n-1},"Next",r.a.createElement(yt.a,null)),backButton:r.a.createElement(C.a,{size:"small",onClick:this.handleBack,disabled:0===this.state.activeStep},r.a.createElement(Et.a,null),"Back")}))}}]),a}(r.a.Component),In=Object(Ke.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{overflow:"hidden",display:"block",width:"100%"}}}))(On),xn=Object(m.a)((function(e){return{itemContainer:{paddingTop:"6px"},itemCard:{borderLeftColor:"#346bc2",borderLeft:"solid",borderWidth:"4px",backgroundColor:"#fafafa"},itemCardOpen:{backgroundColor:"#f6f6f6",borderLeftColor:"#6AB547",borderLeft:"solid",borderWidth:"4px"},itemName:{"&:last-child":{paddingBottom:"16px"}},staticLabel:{fontWeight:500,textTransform:"capitalize",color:"#274C77"},staticLabelQtyContainer:{paddingLeft:"7.5%"},itemInfo:{textTransform:"capitalize"},expandableCard:{borderTop:"1px solid lightgrey"},expandIconContainer:{display:"inline-grid",justifyItems:"center",alignContent:"center"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},deleteIconContainer:{alignSelf:"flex-start",marginTop:"3px",marginLeft:"2px"},deleteIcon:{color:"#b8061d"}}})),Nn=function(e){var t=xn();return e.addedItems.map((function(a,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(lt.a,{container:!0,alignContent:"flex-start",className:t.itemContainer},r.a.createElement(lt.a,{item:!0,xs:11,key:n},r.a.createElement(lt.a,{item:!0,sm:12},r.a.createElement(Vt.a,{key:n,className:Object(gt.a)(t.itemCard,Object(Aa.a)({},t.itemCardOpen,n===e.expandedPanelIdx))},r.a.createElement(lt.a,{container:!0,alignContent:"center"},r.a.createElement(lt.a,{item:!0,xs:11},r.a.createElement(Yt.a,{className:t.itemName},r.a.createElement(lt.a,{container:!0,alignContent:"center"},r.a.createElement(lt.a,{container:!0,item:!0,xs:6},r.a.createElement(et.a,{className:t.staticLabel,color:"primary"},"Name:\xa0"),r.a.createElement(et.a,{className:t.itemInfo},a.nameOfItem)),r.a.createElement(lt.a,{container:!0,item:!0,xs:6,className:t.staticLabelQtyContainer},r.a.createElement(et.a,{className:t.staticLabel,color:"primary"},"Qty:\xa0"),r.a.createElement(et.a,{className:t.itemInfo},a.quantity))))),r.a.createElement(lt.a,{item:!0,xs:1,className:t.expandIconContainer},r.a.createElement(b.a,{className:Object(gt.a)(t.expand,Object(Aa.a)({},t.expandOpen,n===e.expandedPanelIdx)),onClick:function(){e.handleExpand(n)},"aria-expanded":n===e.expandedPanelIdx,"aria-label":"show more"},r.a.createElement(sn.a,null))),r.a.createElement(on.a,{in:n===e.expandedPanelIdx},r.a.createElement(Yt.a,{className:t.expandableCard},r.a.createElement(lt.a,{container:!0,spacing:3},r.a.createElement(lt.a,{container:!0,item:!0,xs:6,sm:6},r.a.createElement(et.a,{className:t.staticLabel},"Category:\xa0"),r.a.createElement(et.a,{className:t.itemInfo},a.category)),r.a.createElement(lt.a,{container:!0,item:!0,xs:6,sm:6},r.a.createElement(et.a,{className:t.staticLabel},"Condition:\xa0"),r.a.createElement(et.a,{className:t.itemInfo},a.condition)),r.a.createElement(lt.a,{container:!0,item:!0,xs:12},r.a.createElement(et.a,{className:t.staticLabel},"Description:\xa0"),r.a.createElement(et.a,{className:t.itemInfo},a.description)),function(e,t){return 0===t.length?r.a.createElement(lt.a,{container:!0,item:!0,xs:12},r.a.createElement(et.a,{className:e.staticLabel},"Images:\xa0"),r.a.createElement(et.a,{className:e.itemInfo},"N/A")):r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{container:!0,item:!0,xs:12},r.a.createElement(et.a,{className:e.staticLabel},"Images:")),r.a.createElement(lt.a,{container:!0,item:!0,xs:12},r.a.createElement(In,{images:t})))}(t,a.images)))))))),r.a.createElement(lt.a,{container:!0,item:!0,xs:1,className:t.deleteIconContainer,spacing:1},r.a.createElement(b.a,{onClick:function(){e.deleteItemFromList(n)}},r.a.createElement(yn.a,{className:t.deleteIcon})))))}))},Cn=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).setHighlighted=function(e){n.setState({highlighted:e})},n.processFiles=function(e){Array.from(e).filter((function(e){return"image/png"===e.type||"image/jpeg"===e.type})).forEach((function(e){var t=new FileReader;t.onloadend=function(){n.props.addImage([t.result])},t.readAsDataURL(e)}))},n.state={highlighted:!1},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.images,i=t.deleteImage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.state.highlighted?"".concat(a.dropzone," ").concat(a.dropzoneDrop):"".concat(a.dropzone),onDragEnter:function(){return e.setHighlighted(!0)},onDragLeave:function(){return e.setHighlighted(!1)},onDragOver:function(e){e.preventDefault()},onDrop:function(t){t.preventDefault(),e.setHighlighted(!1),e.processFiles(t.dataTransfer.files)}},r.a.createElement(Ba.a,{className:a.uploadIcon}),r.a.createElement("h4",{className:a.dropText},"Drop your files here"),r.a.createElement("label",{className:a.browseButton},r.a.createElement("input",{type:"file",multiple:!0,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onChange:function(t){e.processFiles(t.target.files)},className:a.input}),"Browse")),r.a.createElement("div",{className:a.imgContainer},n.map((function(e,t){return r.a.createElement("div",{key:t,className:a.imgDiv},r.a.createElement("img",{src:e,alt:"something",className:a.imgPreview}),r.a.createElement(b.a,{"aria-label":"delete image",component:"span",className:a.deleteButton,onClick:function(){return i("images",t)}},r.a.createElement(q.a,null)))}))))}}]),a}(r.a.Component),jn=Object(Ke.a)((function(e){return{dropzone:{border:"2px dashed ".concat(e.palette.text.disabled),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& > *":{margin:e.spacing(1)}},dropzoneDrop:{backgroundColor:"#DBEAF8",border:"2px dashed ".concat(e.palette.info.main)},uploadIcon:{fontSize:"5rem",color:e.palette.text.disabled},dropText:{fontWeight:300,fontSize:"1.6rem",color:e.palette.text.secondary},browseButton:{color:e.palette.info.main,border:"1px solid ".concat(e.palette.info.main),fontSize:"0.875rem",lineHeight:"1.75",borderRadius:"4px",textTransform:"uppercase",padding:"5px 15px",boxSizing:"border-box",cursor:"pointer"},input:{display:"none"},imgPreview:{height:100},imgContainer:{display:"flex",flexWrap:"wrap"},deleteButton:{margin:0,padding:0,position:"absolute",right:"0",top:"0",color:"red"},imgDiv:{margin:e.spacing(1),position:"relative"}}}))(Cn),Sn=Object(m.a)((function(e){return{addItemSection:{marginTop:"30px"},comment:{outline:"none",marginBottom:"20px"},formSection:{marginBottom:"20px"},formHeader:{color:e.palette.primary.main,paddingBottom:"10px"},form:{width:"100%",minHeight:"270px",marginBottom:e.spacing(3),flexGrow:1},textField:{},addBtnContainer:{justifySelf:"flex-end"},addBtn:{fontWeight:300,textTransform:"capitalize",justifySelf:"flex-end",margin:"5px"}}})),wn=function(e){var t=Sn(),a=e.state,n=a.item,i=a.errors,c=n.nameOfItem,o=n.quantity,l=n.images,s=n.description,u=n.category,m=n.condition;return r.a.createElement("div",{className:t.addItemSection},r.a.createElement(et.a,{variant:"h6",className:t.formHeader},"Add an Item"),r.a.createElement(lt.a,{container:!0,className:t.form,spacing:1},r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,label:"Name of Item",className:t.textField,fullWidth:!0,margin:"dense",variant:"outlined",name:"nameOfItem",onChange:e.handleChange,defaultValue:c,error:!!i.nameOfItem,helperText:i.nameOfItem})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,multiline:!0,rows:3,label:"Description",className:t.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"description",onChange:e.handleChange,defaultValue:s,error:!!i.description,helperText:i.description})),r.a.createElement(lt.a,{item:!0,xs:3,sm:6},r.a.createElement(Ta.a,{required:!0,id:"outlined-select-category-native",select:!0,label:"Category",margin:"dense",fullWidth:!0,SelectProps:{native:!0},variant:"outlined",onChange:e.handleChange,name:"category",defaultValue:u,error:!!i.category,helperText:i.category},Ve.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))),r.a.createElement(lt.a,{item:!0,xs:3,sm:6},r.a.createElement(Ta.a,{required:!0,id:"outlined-select-condition-native",select:!0,label:"Condition",margin:"dense",fullWidth:!0,SelectProps:{native:!0},variant:"outlined",onChange:e.handleChange,name:"condition",defaultValue:m,error:!!i.condition,helperText:i.condition},Qe.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,label:"Quantity",className:t.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"quantity",defaultValue:o,onChange:e.handleChange,type:"number",inputProps:{min:"1"},error:!!i.quantity,helperText:i.quantity})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(jn,{images:l,handleChange:e.handleChange,addImage:e.addImage,deleteImage:e.deleteImage})),r.a.createElement(lt.a,{container:!0,item:!0,justify:"flex-end",xs:12},r.a.createElement(C.a,{variant:"contained",color:"primary",className:t.addBtn,startIcon:r.a.createElement(S.a,null),onClick:function(){e.handleSubmitAddItem()}},"Add Item"))))},kn=Object(m.a)((function(e){return{addCircleIcon:{color:e.palette.primary.main,fontSize:"1.6rem"}}})),An=function(e){var t=kn();return e.showForm?r.a.createElement(wn,{state:e.state,handleChange:e.handleChange,handleSubmitAddItem:e.handleClickAddItem,addImage:e.addImage,deleteImage:e.deleteImage}):r.a.createElement(lt.a,{container:!0,justify:"flex-end",direction:"row",spacing:1},r.a.createElement(lt.a,{container:!0,item:!0,xs:11}),r.a.createElement(lt.a,{container:!0,item:!0,xs:1},r.a.createElement(b.a,{className:t.addCircleIcon,color:"inherit","aria-label":"showAddItemFormBtn",onClick:e.handleClickAddIcon},r.a.createElement(S.a,{className:t.addCircleIcon}))))},Dn=function(e){var t=e.state.addedItems,a=r.a.useState(-1),n=Object(o.a)(a,2),i=n[0],c=n[1],l=r.a.useState(0===t.length),s=Object(o.a)(l,2),u=s[0],m=s[1],d=function(){e.validateItemFields()?(e.addItemToList(),m(!1)):m(!0)},p=function(){m(!0)};return 0===t.length?r.a.createElement("div",{className:e.classes.formSection},r.a.createElement(An,{state:e.state,handleClickAddIcon:p,handleClickAddItem:d,handleChange:e.handleChange,showForm:u,addImage:e.addImage,deleteImage:e.deleteImage})):r.a.createElement("div",{className:e.classes.formSection},r.a.createElement(lt.a,{container:!0,spacing:1,className:e.classes.section},r.a.createElement(et.a,{variant:"h6",color:"primary",className:e.classes.formHeader},"Added Items"),r.a.createElement(lt.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(Nn,{expandedPanelIdx:i,addedItems:t,classes:e.classes,handleExpand:function(e){c(i===e?-1:e)},deleteItemFromList:e.deleteItemFromList}))),r.a.createElement(An,{state:e.state,handleClickAddIcon:p,handleClickAddItem:d,handleChange:e.handleChange,showForm:u,addImage:e.addImage,deleteImage:e.deleteImage}))},Tn=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.state;return r.a.createElement("div",{className:t.form},r.a.createElement("div",{className:t.formSection},r.a.createElement(et.a,{variant:"h6",className:t.formHeader},"Comment"),r.a.createElement(lt.a,{container:!0,spacing:1,className:t.commentTxtbox},r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,multiline:!0,rows:3,label:"Comment",className:t.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"comment",value:this.props.state.comment,onChange:this.props.handleChangeCommentInput,error:!!a.errors.comment,helperText:a.errors.comment})))),r.a.createElement(Dn,{classes:t,state:this.props.state,addItemToList:this.props.addItemToList,handleChange:this.props.handleChangeAddItemInputs,addImage:this.props.addImage,deleteImage:this.props.deleteImage,validateItemFields:this.props.validateItemFields,deleteItemFromList:this.props.deleteItemFromList}))}}]),a}(r.a.Component),Fn=Object(Ke.a)((function(e){return{formSection:{marginBottom:"20px"},section:{marginBottom:"5px"},formHeader:{color:e.palette.primary.main,paddingBottom:"10px"},form:{width:"100%",minHeight:"270px",marginBottom:e.spacing(3),flexGrow:1},commentTxtbox:{minWidth:"600px"}}}))(Tn),Ln="".concat("http://localhost:5000/api"),Rn=function(e,t){return{type:"MAKE_OFFER",offering:e,postId:t}},Bn="PENDING",Pn=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).addItemToList=function(){var e=n.state.addedItems;e.push(n.state.item),n.setState({addedItems:e}),n.clearAddItemForm()},n.clearAddItemForm=function(){n.setState({item:{nameOfItem:"",quantity:1,images:[],description:"",category:"",condition:""}})},n.deleteItemFromList=function(e){var t=n.state.addedItems.filter((function(t,a){return a!==e}));n.setState({addedItems:t})},n.handleAddImage=function(e){n.setState({item:Object(St.a)(Object(St.a)({},n.state.item),{},{images:[].concat(Object(Da.a)(n.state.item.images),Object(Da.a)(e))})})},n.handleCancel=function(){var e=n.state,t=e.comment,a=e.addedItems;""!==t||0!==a.length?window.confirm("Are you sure you want to leave? Changes will not be saved.")&&n.props.closeModal():n.props.closeModal()},n.handleChangeAddItemInputs=function(e){var t=e.target,a=t.name,r=t.value;n.validateItemInput([a,r]);var i=n.state.item;i[a]=r,n.setState({item:i})},n.handleChangeTab=function(e,t){n.setState({currTabIdx:t})},n.handleChangeCommentInput=function(e){n.validateItemInput([e.target.name,e.target.value]),n.setState(Object(Aa.a)({},e.target.name,e.target.value))},n.handleRemoveFromList=function(e,t){var a=n.state.item[e].filter((function(e,a){return a!==t}));n.setState({item:Object(St.a)(Object(St.a)({},n.state.item),{},Object(Aa.a)({},e,a))})},n.handleSubmit=function(){if(n.validateOfferSubmission()){var e=(a=n.state.comment,r=n.state.addedItems,i=n.props.currentUser,{postingId:n.props.itemDetail._id,userId:i.user._id,offeredItems:r,comment:a,status:Bn,date:new Date}),t=n.props.itemDetail._id;n.props.makeOffer(e,t),n.resetFormState(),setTimeout((function(){n.props.closeModal()}),700)}else n.props.displayError("An offer must have either a comment or an item");var a,r,i},n.isItemFormInvalid=function(){var e=at.a.pick(n.state.item,["nameOfItem","description","category","condition"]),t=at.a.values(e).some((function(e){return 0===e.length}));return n.state.quantity<1||t},n.resetFormState=function(){n.setState({addedItems:[],showAddForm:!0,comment:"",item:{nameOfItem:"",quantity:1,images:[],description:"",category:"",condition:""},errors:{addedItems:"",comment:"",nameOfItem:"",description:"",category:"",condition:"",quantity:""}})},n.validateItemInput=function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1],i=n.state.errors;switch(a){case"nameOfItem":i.nameOfItem=r.length>0?"":"Name of item cannot be left blank";break;case"description":i.description=r.length>0?"":"Description cannot be left blank";break;case"category":i.category=r.length>0?"":"Category must be selected";break;case"condition":i.condition=r.length>0?"":"Condition must be selected";break;case"quantity":i.quantity=r>0?"":"Quantity must be greater than 1";break;case"comment":i.comment=r.length>0?"":"Must have either a comment or an item"}n.setState({errors:i})},n.validateOfferSubmission=function(){var e=!0,t=n.state.errors;return 0===n.state.comment.length&&0===n.state.addedItems.length&&(t.comment="Must have either a comment or an item",t.addedItems="Must have either a comment or an item",e=!1),n.setState({errors:t}),e},n.validateRequiredItemFields=function(){var e=at.a.toPairs(at.a.pick(n.state.item,["nameOfItem","description","category","condition","quantity"]));return at.a.forEach(e,n.validateItemInput),!n.isItemFormInvalid()},n.state={currTabIdx:0,addedItems:[],showAddForm:!0,comment:"",item:{nameOfItem:"",quantity:1,images:[],description:"",category:"",condition:""},errors:{addedItems:"",comment:"",nameOfItem:"",description:"",category:"",condition:"",quantity:""}},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(mt.a,{className:t.paper},r.a.createElement(et.a,{align:"center",variant:"h4",className:t.modalHeader},"Make an Offer"),r.a.createElement(Fn,{state:this.state,handleChangeCommentInput:this.handleChangeCommentInput,handleChangeAddItemInputs:this.handleChangeAddItemInputs,addImage:this.handleAddImage,deleteImage:this.handleRemoveFromList,validateItemFields:this.validateRequiredItemFields,addItemToList:this.addItemToList,deleteItemFromList:this.deleteItemFromList}),r.a.createElement(lt.a,{container:!0,justify:"space-between"},r.a.createElement(lt.a,{item:!0,xs:6},r.a.createElement(C.a,{onClick:function(){e.handleCancel()}},"Cancel")),r.a.createElement(lt.a,{container:!0,item:!0,xs:6,justify:"flex-end"},r.a.createElement(C.a,{onClick:function(){e.handleSubmit()}},"Submit"))))}}]),a}(r.a.Component),_n=Object(s.b)((function(e){return{currentUser:e.currentUser,itemDetail:e.itemDetail}}),(function(e){return{makeOffer:function(t,a){return e(function(e,t){return function(){var a=Object(ae.a)(te.a.mark((function a(n){var r;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(ke(!0)),a.next=4,re.a.post("".concat(Ln,"/postings/").concat(t,"/offerings"),e);case 4:r=a.sent,n(Rn(r.data._id,t)),n(ce("Offer was successfully made")),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n(ie("Offer could not be made. Please try again later"));case 12:return a.prev=12,n(ke(!1)),a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,9,12,15]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},closeModal:function(){return e({type:"CLOSE_MODAL"})},displayError:function(t){return e(ie(t))},displaySuccess:function(t){return e(ce(t))}}}))(Object(Ke.a)((function(e){return{paper:{width:"100%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none",position:"relative"},tabsRoot:{marginBottom:"30px",outline:"display"},modalHeader:{paddingBottom:"20px"},submitBtn:{backgroundColor:"#6ab547"}}}))(Pn)),Un=a(107),Mn=a.n(Un),qn=Object(m.a)((function(e){return{googleBtn:{backgroundColor:"#1d588f",margin:e.spacing(1)}}})),Wn=Object(s.b)((function(e){return{currentUser:e.currentUser,modal:e.modal,itemDetail:e.itemDetail}}),(function(e){return{loginUserAsync:function(t,a,n,r,i){return e(Ne(t,a,n,r,i))},unsetUser:function(){return e({type:"UNSET_USER"})},closeModal:function(){return e({type:"CLOSE_MODAL"})},displayError:function(t){return e(ie(t))}}}))((function(e){var t=e.loginUserAsync,a=e.displayError,n=e.modal,i=e.itemDetail,c=qn(),o=function(){var e=Object(ae.a)(te.a.mark((function e(a){var r,c,o,l,s,u,m;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.profileObj,c=r.name,o=r.email,l=r.givenName,s=r.familyName,u=c,"googlePassword","None",m=new Date,!a.accessToken){e.next=8;break}return e.next=8,t(o,"googlePassword",{userName:u,givenName:l,familyName:s,postalCode:"None",dateRegistered:m},n.openedFrom,i.ownerId);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(je.GoogleLogin,{clientId:"282830719674-g3jh5koi6efcqmvtml24atp923gibqjp.apps.googleusercontent.com",buttonText:"Continue with Google",className:c.googleBtn,onSuccess:o,onFailure:function(e){a("Google login failed. Please try again!"),console.log(e)},isSignedIn:!0,cookiePolicy:"single_host_origin"})}));function Gn(){return r.a.createElement(et.a,{color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(He.a,{color:"inherit",href:"/"},"Tradeforce 2020"))}var zn=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},spaced:{margin:e.spacing(1)},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},loginBtn:{textTransform:"none"}}})),Hn=Object(s.b)((function(e){return{currentUser:e.currentUser,modal:e.modal,itemDetail:e.itemDetail}}))((function(e,t){var a=e.dispatch,i=e.modal,c=e.itemDetail,l=zn(),s=Object(n.useState)(!0),u=Object(o.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(""),f=Object(o.a)(p,2),g=f[0],h=f[1],v=Object(n.useState)(""),E=Object(o.a)(v,2),b=E[0],y=E[1],O=Object(n.useState)(""),I=Object(o.a)(O,2),x=I[0],N=I[1],j=Object(n.useState)(""),S=Object(o.a)(j,2),w=S[0],k=S[1],A=Object(n.useState)(""),D=Object(o.a)(A,2),T=D[0],F=D[1],L=function(e){if(e){if(""===g||""===T)return a(ie("Some required fields are missing. Please fill them out!")),!1}else if(""===g||""===T||""===w||""===b||""===x)return a(ie("Some required fields are missing. Please fill them out!")),!1;return R(g)?!B(g)||(a(ie("Gmail address detected. Please use the Google Login for registering or logging in with a Google account.")),!1):(a(ie("Bad Email address. Please input an appropriate email address.")),!1)},R=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},B=function(e){return/@gmail\.com$/.test(e)},P=function(){var e=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!L(!1)){e.next=4;break}return e.next=4,a(xe({userName:w,firstName:b,lastName:x,email:g,postalCode:"None",dateRegistered:new Date,password:T,isGoogleUser:!1},i.openedFrom,c.ownerId));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!L(!0)){e.next=4;break}return e.next=4,a(Ne(g,T,!1,i.openedFrom,c.ownerId));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"email":h(n);break;case"password":F(n);break;case"userName":k(n);break;case"firstName":y(n);break;case"lastName":N(n);break;default:return}},M=function(){d(!m)};return r.a.createElement(Xe.a,{component:"main",maxWidth:"xs"},m?r.a.createElement("div",{className:l.paper},r.a.createElement(ua.a,{className:l.spaced},r.a.createElement(Mn.a,null)),r.a.createElement(et.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(Wn,{fromButton:t.fromButton}),r.a.createElement(et.a,{component:"h1",variant:"h5"},"Or"),r.a.createElement("form",{className:l.form,noValidate:!0},r.a.createElement(lt.a,{container:!0,spacing:2},r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:g,onChange:U})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:T,onChange:U}))),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,onClick:_},"Sign in"),r.a.createElement(lt.a,{container:!0,justify:"flex-end"},r.a.createElement(lt.a,{item:!0},r.a.createElement(C.a,{className:l.loginBtn,onClick:M},"Don't have an account? Sign up"))))):r.a.createElement("div",{className:l.paper},r.a.createElement(ua.a,{className:l.spaced},r.a.createElement(Mn.a,null)),r.a.createElement(et.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement(Wn,null),r.a.createElement(et.a,{component:"h1",variant:"h5"},"Or"),r.a.createElement("form",{className:l.form,noValidate:!0},r.a.createElement(lt.a,{container:!0,spacing:2},r.a.createElement(lt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ta.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",value:b,onChange:U})),r.a.createElement(lt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ta.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:x,onChange:U})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"User Name",name:"userName",autoComplete:"userName",value:w,onChange:U})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:g,onChange:U})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:T,onChange:U}))),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,onClick:P},"Sign Up"),r.a.createElement(lt.a,{container:!0,justify:"flex-end"},r.a.createElement(lt.a,{item:!0},r.a.createElement(C.a,{className:l.loginBtn,onClick:M},"Already have an account? Sign in"))))),r.a.createElement(Je.a,{mt:5},r.a.createElement(Gn,null)))})),Vn=Object(m.a)((function(e){return{paper:{backgroundColor:e.palette.background.paper,padding:e.spacing(2,4,3)}}})),Qn=Object(s.b)()((function(){var e=Vn();return r.a.createElement("div",{className:e.paper},r.a.createElement(Hn,null))})),Zn="".concat("http://localhost:5000/api"),Yn=function(e){return{type:"ADD_REVIEW",review:e}},Xn=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target.name,a="rating"===t?parseInt(e.target.value):e.target.value;n.setState(Object(Aa.a)({},t,a))},n.handleSubmit=function(){var e=n.props,t=e.currentUser,a=e.userToBeReviewed,r=Object(St.a)(Object(St.a)({},n.state),{},{reviewUsername:t.userName});n.props.addReview({review:r,userToBeReviewed:a}),n.props.closeModal()},n.state={title:"",rating:0,review:""},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.closeModal;return r.a.createElement(mt.a,{className:t.paper},r.a.createElement(et.a,{align:"center",variant:"h4"},"Create A Review"),r.a.createElement(lt.a,{container:!0,spacing:1,className:t.reviewContainer},r.a.createElement(lt.a,{item:!0,className:t.ratingContainer,xs:6},r.a.createElement(et.a,{variant:"subtitle1"},"Rate this user:"),r.a.createElement($e.a,{name:"rating",value:this.state.rating,onChange:this.handleInputChange,size:"large",className:t.rating})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,label:"Title",className:t.textfield,margin:"dense",variant:"outlined",name:"title",onChange:this.handleInputChange,defaultValue:this.state.title,fullWidth:!0})),r.a.createElement(lt.a,{item:!0,xs:12},r.a.createElement(Ta.a,{required:!0,multiline:!0,rows:4,label:"Review",className:t.textfield,fullWidth:!0,margin:"dense",variant:"outlined",name:"review",onChange:this.handleInputChange,defaultValue:this.state.details}))),r.a.createElement("div",{className:t.buttonHeader},r.a.createElement(C.a,{onClick:a,variant:"outlined",className:t.cancelButton},"Cancel"),r.a.createElement(C.a,{onClick:this.handleSubmit,variant:"contained",color:"primary"},"Save")))}}]),a}(r.a.Component),Kn=Object(s.b)((function(e){return{currentUser:e.currentUser.user,userToBeReviewed:e.userDetail._id}}),{addReview:function(e){var t=e.review,a=e.userToBeReviewed;return function(){var e=Object(ae.a)(te.a.mark((function e(n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.post("".concat(Zn,"/users/").concat(a,"/reviews"),t);case 3:n(Yn(t)),n(ce("Review was successfully added")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(ie("Review could not be saved. Please try again later"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},closeModal:he})(Object(Ke.a)((function(e){return{paper:{width:"100%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none",position:"relative"},ratingContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:0},reviewContainer:{display:"inline-block",width:"100%",minHeight:"270px",padding:e.spacing(4,0)},buttonHeader:{display:"flex",justifyContent:"space-between",margin:e.spacing(1)},cancelButton:{color:"#AD343E",borderColor:"#AD343E"},rating:{marginLeft:e.spacing(2)}}}))(Xn)),Jn=Object(m.a)((function(e){return{errorModal:{backgroundColor:e.palette.secondary.main}}})),$n=function(){var e=Jn();return r.a.createElement("div",{className:e.errorModal},r.a.createElement("p",null,"Error: Wrong modal type"))},er=Object(m.a)((function(){return{modalContainer:{display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",height:"100%",maxHeight:"100vh"},modalContents:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",outline:"none"}}})),tr=function(e){var t=er();return r.a.createElement(Ga.a,{open:e.modal.isOpen,onClose:function(){e.closeModal()},scroll:"paper",maxWidth:"LOGIN_MODAL"===e.modal.type?"sm":"md",fullWidth:!0,disableScrollLock:!0,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",classes:{paperFullWidth:t.dialogCustomizedWidth}},r.a.createElement("div",{className:t.modalContents},function(e){switch(e.modal.type){case"OFFER_MODAL":return r.a.createElement(_n,null);case"POSTING_MODAL":return r.a.createElement(En,null);case"LOGIN_MODAL":return r.a.createElement(Qn,null);case"REVIEW_MODAL":return r.a.createElement(Kn,null);case"":return null;default:return r.a.createElement($n,null)}}(e)))},ar=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement(tr,{modal:this.props.modal,closeModal:this.props.closeModal})}}]),a}(r.a.Component),nr=Object(s.b)((function(e){return{modal:e.modal}}),(function(e){return{closeModal:function(){return e({type:"CLOSE_MODAL"})}}}))(ar),rr=a(296),ir=a(294);function cr(e){return r.a.createElement(ir.a,Object.assign({elevation:6,variant:"filled"},e))}var or=Object(s.b)((function(e){return{snackbar:e.snackbar}}),{clearSnackbar:function(){return{type:"CLEAR_SNACKBAR"}}})((function(e){var t=e.snackbar,a=e.clearSnackbar,n=function(){a()};return t.isOpen?r.a.createElement(rr.a,{anchorOrigin:t.position,open:t.isOpen,autoHideDuration:6e3,onClose:n},r.a.createElement(cr,{onClose:n,severity:t.type},t.message)):null})),lr=a(289),sr=Object(m.a)((function(){return{root:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#F8F8F8AD",zIndex:2e3},loader:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}})),ur=Object(s.b)((function(e){return{loading:e.loading}}))((function(e){var t=sr();return e.loading&&r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.loader},r.a.createElement(lr.a,null)))})),mr=Object(u.a)({palette:{primary:{light:"#01BAEF",main:"#1D588F"},secondary:{main:"#FFFFFF"},info:{main:"#00A5E0"}},typography:{fontFamily:["Roboto","Montserrat"].join(",")}}),dr=Object(m.a)((function(){return{root:{height:"100vh"}}})),pr=Object(s.b)()((function(e){var t=e.dispatch,a=dr(),i=Object(n.useState)(!1),c=Object(o.a)(i,2),s=c[0],u=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e?(t(ke(!0)),t(function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){var n,r,i;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"auth-token":e}},t.next=4,re.a.post("".concat(Oe,"/authenticate"),{},n);case 4:return r=t.sent,i=r.data,t.abrupt("return",a(Ie({_id:i._id,userName:i.userName,firstName:i.firstName,lastName:i.lastName,email:i.email,postalCode:"None",dateRegistered:i.dateRegistered,isGoogleUser:i.isGoogleUser})));case 9:return t.prev=9,t.t0=t.catch(0),a({type:"IS_USER_FAILED"}),t.abrupt("return",a(ie(t.t0.response.data.message)));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(e)).then((function(){t(ke(!1))})).catch((function(){t(ie("Error occurred during authentication. Try again!"))})).finally((function(){u(!0)}))):u(!0)}),[t]),s?r.a.createElement(l.a,null,r.a.createElement(d.a,{theme:mr},r.a.createElement(ur,null),r.a.createElement("div",{className:a.root},r.a.createElement(Ge,null),r.a.createElement($a,null),r.a.createElement(nr,null),r.a.createElement(or,null),r.a.createElement("div",{className:a.flyoutRoot},r.a.createElement(Ye,null))))):r.a.createElement(ur,null)})),fr=a(148),gr=a(60),hr={loading:!1,flyoutIsOpen:!1,modal:{isOpen:!1,type:"",openedFrom:""},snackbar:{isOpen:!1,type:"",message:""},postings:[],currentUser:{isFetching:!1,isFailed:!1,user:null},error:null,itemDetail:{},userDetail:{},notifications:[]},vr=function(e,t){var a=t.posting;return a.quantity=parseInt(a.quantity),[].concat(Object(Da.a)(e),[a])},Er=function(e,t){var a=t.itemId;return e.filter((function(e){return e._id!==a}))},br=function(e,t){var a=t.itemId,n=t.details;return e.map((function(e){return e._id===a?Object(St.a)(Object(St.a)({},e),n):e}))},yr=function(e){return e.postings},Or=function(e,t){return e.map((function(e){if(e.id===t.postId){e.offerings||(e.offerings=[]);var a=e.offerings.concat(t.offering);return Object(St.a)(Object(St.a)({},e),{},{offerings:a})}return e}))},Ir=function(e,t,a){return e._id===t?Object(St.a)(Object(St.a)({},e),a):e},xr=function(e,t){e.offerings||(e.offerings=[]);var a=e.offerings.concat(t.offering);return Object(St.a)(Object(St.a)({},e),{},{offerings:a})},Nr=function(e,t){var a=e.reviews||[],n=[].concat(Object(Da.a)(a),[t.review]);return Object(St.a)(Object(St.a)({},e),{},{reviews:n})},Cr=function(e){return e.user},jr=function(e,t){return e._id===t.user._id?Object(St.a)(Object(St.a)({},e),t.user):e},Sr=function(e,t){var a=at.a.find(e.activePostings,{_id:t.offering.postingId});a.active=!1;var n=[].concat(Object(Da.a)(e.inactivePostings),[a]),r=at.a.filter(e.activePostings,(function(e){return e._id!==t.offering.postingId}));return Object(St.a)(Object(St.a)({},e),{},{activePostings:r,inactivePostings:n})},wr=function(e,t){var a=t.offering.postingId,n=at.a.map(e.activePostings,(function(e){if(e._id===a){var n=at.a.map(e.offerings,(function(e){return e._id===t.offering._id?t.offering:e}));return Object(St.a)(Object(St.a)({},e),{},{offerings:n})}return e}));return Object(St.a)(Object(St.a)({},e),{},{activePostings:n})},kr=function(e,t){var a=at.a.filter(e.offersSent,(function(e){return e._id!==t.offering._id}));return Object(St.a)(Object(St.a)({},e),{},{offersSent:a})},Ar=Object(gr.c)({flyoutIsOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.flyoutIsOpen,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLICK_MENU_BTN":return!e;case"CLOSE_FLYOUT":default:return!1}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.modal,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_MODAL":return{isOpen:!1,type:"",openedFrom:""};case"OPEN_OFFER_MODAL":return{isOpen:!0,type:"OFFER_MODAL",openedFrom:"MAKE_OFFER_BUTTON"};case"OPEN_POSTING_MODAL":return{isOpen:!0,type:"POSTING_MODAL",openedFrom:"ADD_POSTING_BUTTON"};case"OPEN_LOGIN_MODAL":return{isOpen:!0,type:"LOGIN_MODAL",openedFrom:t.openedFrom};case"OPEN_REVIEW_MODAL":return{isOpen:!0,type:"REVIEW_MODAL",openedFrom:"ADD_REVIEW_BUTTON"};default:return{isOpen:e.isOpen,type:e.type,openedFrom:e.openedFrom}}},postings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.postings,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POSTING":return vr(e,t);case"DELETE_POSTING":return Er(e,t);case"UPDATE_ITEM_DETAIL":return br(e,t);case"LOAD_POSTINGS":return yr(t);case"MAKE_OFFER":return Or(e,t);case"CLEAR_OLD_POSTINGS":return[];default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.currentUser,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return{isFetching:!1,isFailed:!1,user:t.user};case"UNSET_USER":return{isFetching:!1,isFailed:!1,user:null};case"IS_USER_FETCHING":return{isFetching:!0,isFailed:e.isFailed,user:e.user};case"IS_USER_FAILED":return{isFetching:e.isFetching,isFailed:!0,user:e.user};default:return e}},itemDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.itemDetail,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ITEM_DETAIL":return t.item;case"UPDATE_ITEM_DETAIL":return Ir(e,t.itemId,t.details);case"DELETE_POSTING":return{};case"MAKE_OFFER":return xr(e,t);case"CLEAR_OLD_ITEM_DETAILS":return{};default:return e}},userDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.userDetail,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_REVIEW":return Nr(e,t);case"LOAD_USER_DETAIL":return Cr(t);case"UPDATE_USER_DETAIL":return jr(e,t);case"ACCEPT_OFFER":return Sr(e,t);case"DECLINE_OFFER":return wr(e,t);case"RESCIND_OFFER":return kr(e,t);default:return e}},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.snackbar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_SNACKBAR":return{isOpen:!1,type:"",message:"",position:{}};case"SUCCESS_SNACKBAR":return{isOpen:!0,type:"success",message:t.successMessage,position:{vertical:"bottom",horizontal:"center"}};case"ERROR_SNACKBAR":return{isOpen:!0,type:"error",message:t.errMessage,position:{vertical:"bottom",horizontal:"center"}};case"WARNING_SNACKBAR":return{isOpen:!0,type:"warning",message:t.warningMessage,position:{vertical:"bottom",horizontal:"center"}};default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.loading,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return t.isLoading;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.error,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_SNACKBAR":return{error:t.msg,hasError:!0};default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr.notifications,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NOTIFICATIONS":return t.notifications;case"REMOVE_NOTIFICATION":return e.filter((function(e){return e._id!==t._id}));case"REMOVE_ALL_NOTIFICATIONS":return[];case"UPDATE_NOTIFICATION":return e.map((function(e){return e._id===t._id?Object(St.a)(Object(St.a)({},e),{},{isRead:t.isRead}):e}));case"UPDATE_ALL_NOTIFICATIONS":return e.map((function(e){return Object(St.a)(Object(St.a)({},e),{},{isRead:t.isRead})}));default:return e}}});a(204).config();var Dr=Object(gr.d)(Ar,Object(gr.a)(fr.a));c.a.render(r.a.createElement(s.a,{store:Dr},r.a.createElement(pr,null)),document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.767acd57.chunk.js.map